{"version":3,"sources":["consts/action-types.const.ts","consts/default.ts","helpers/namespaces.ts","contexts/walletConnect.tsx","helpers/solana.ts","helpers/utilities.ts","rpc/api.ts","rpc/infura-api.ts","rpc/rpc-api.ts","helpers/tx.ts","utils/index.ts","enums/user-types.enum.ts","consts/chains.ts","pages/landing.tsx","services/axios.ts","store/actions/user.action.ts","config/appconfig.tsx","services/user.service.ts","reportWebVitals.ts","models/state.model.ts","store/states/user.state.ts","store/states/index.ts","store/reducer/user.reducer.ts","store/reducer/index.ts","store/saga/user.saga.ts","store/saga/index.ts","store/index.ts","contexts/JsonRpcContext.tsx","assets/images/logo.png","assets/images/promo_image_1.svg","assets/images/promo_image_2.svg","assets/images/promo_image_3.svg","utils/i18utils.tsx","index.tsx","pages/error.tsx","utils/walletConnect.ts"],"names":["userActionTypes","EUserActionTypes","DEFAULT_CHAINS","isTestnetMode","DEFAULT_PROJECT_ID","DEFAULT_RELAY_URL","APP_URL","DEFAULT_APP_METADATA","name","description","url","icons","DEFAULT_EIP155_METHODS","DEFAULT_EIP_155_EVENTS","DEFAULT_COSMOS_METHODS","DEFAULT_COSMOS_EVENTS","DEFAULT_SOLANA_METHODS","DEFAULT_SOLANA_EVENTS","getSupportedMethodsByNamespace","namespace","values","Object","console","log","concat","Error","getSupportedEventsByNamespace","getRequiredNamespaces","chains","selectedNamespaces","supportedNamespaces","forEach","chainId","split","includes","push","getNamespacesFromChains","fromEntries","map","methods","filter","chain","startsWith","events","loadingTimeout","SIGNATURE_PREFIX","NDJ_ADDRESS","ClientContext","createContext","WalletConnectProvider","_ref","children","client","setClient","useState","pairings","setPairings","session","setSession","dispatch","useDispatch","qrCodeUri","setQRCodeUri","initialized","setInitialized","isFetchingBalances","setIsFetchingBalances","isInitializing","setIsInitializing","isLoading","setIsLoading","account","setAccount","accounts","setAccounts","solanaPublicKeys","setSolanaPublicKeys","setChains","balances","setBalances","merchantLogin","setMerchantLogin","isMerchantUser","merchantExists","pathname","useLocation","reset","info","undefined","i","localStorage","length","key","removeItem","getAccountBalances","async","arr","Promise","all","_accounts","reference","address","assets","currentRpcApi","getAccountBalance","symbol","balance","_ref2","e","error","onSessionConnected","useCallback","allNamespaceAccounts","_session","namespaces","flat","allNamespaceChains","keys","reduce","pop","PublicKey","getPublicKeysFromAccounts","loginWithAccount","loginWithSignedNonce","login","useEffect","getItem","availableAccounts","a","toast","disconnect","startTime","moment","duration","diff","asSeconds","waitTime","sleep","setItem","userAction","loginSuccess","err","message","loginRes","UserService","loginApi","data","nonce","warn","res","nonceApi","signature","params","encoding","request","topic","method","PERSONAL_SIGN","signNonce","axios","setAuthorizationToken","setNonce","merchantLoginSuccess","connect","pairing","requiredNamespaces","connectParams","pairingTopic","uri","approval","getAll","active","reason","getSdkError","refreshBalances","switchAccount","_account","_subscribeToEvents","_client","on","args","_ref3","updatedSession","get","_checkPersistedState","lastKeyIndex","createClient","Client","init","relayUrl","projectId","metadata","getAppMetadata","then","value","debug","catch","useMemo","_jsx","Provider","useWalletConnectClient","context","useContext","ellipseAddress","arguments","width","slice","sanitizeDecimals","decimals","integer","fractional","_fractional","substring","replace","join","toWad","amount","utils","parseUnits","LOCALSTORAGE_KEY_TESTNET","INITIAL_STATE_TESTNET_DEFAULT","getLocalStorageTestnetFlag","persisted","window","setLocaleStorageTestnetFlag","ethereumApi","create","baseURL","timeout","headers","Accept","ethInstance","ethereumRpcUrl","polygonInstance","polygonRpcUrl","infuraGetAccountBalance","response","post","result","contractAddress","infuraGetPolygonAccountBalance","infuraGetEthAccountBalance","infuraGetTransactionByHash","hash","InfuraApi","getAccountNonce","infuraGetAccountNonce","getGasPrices","infuraGetGasPrices","getTransactionByHash","getAccountTransactions","resolve","EthereumXyzApi","ethChainId","apiGetAccountBalance","apiGetAccountNonce","gasPrices","apiGetGasPrices","slow","price","toHexString","apiGetAccountTransactions","constructor","infuraRpcApi","ethereumXyzRpcApi","this","generateTransaction","sendAmount","orderTrackingId","_nonce","_gasPrice","getGasPrice","gasPrice","encodeNumberAsHex","Number","gasLimit","_value","toString","from","to","hex3","web3","numberToHex","getNonZeroAccountBalance","balanceString","firstNonZeroAccount","accountBalance","BigNumber","accountBalanceUSD","balanceToken","accountBalances","balanceElement","gt","formatEther","token","balanceUsd","setTimeout","ms","getConnectionStatusDisplay","getConnectionNetwork","chainData","getDisplayName","ensName","chainMeta","currency","bep20","id","rpc","slip44","testnet","logo","rgb","solana","eip155","Landing","_jsxs","className","defaults","apiBaseUrl","isDevMode","common","interceptors","use","code","AxiosService","AuthorizationToken","Nonce","addHeaders","userConfig","globalHeaders","endPoint","includeHeaders","put","patch","del","delete","getNonce","getSignature","payload","type","LOGIN_SUCCESS","getAccountInfoSuccess","GET_USER_INFO_SUCCESS","getMerchantInfoSuccess","GET_MERCHANT_INFO_SUCCESS","getOrderSuccess","externalOrderId","trackingId","GET_ORDER_SUCCESS","getEnsNameSuccess","GET_ENS_NAME_SUCCESS","getTickersSuccess","GET_PRICE_TICKERS_SUCCESS","setTransactionInProgress","SET_TRANSACTION_IN_PROGRESS","setTransactionInfoWallet","_payload$transaction","_payload$transaction2","transactionHash","transaction","SET_TRANSACTION_INFO","setCreateTransaction","SET_CREATE_TRANSACTION","unsetTransaction","UNSET_TRANSACTION","setCreateTransactionSuccess","SET_TRANSACTION_SUCCESS","setCreateOrderSuccess","CREATE_ORDER_SUCCESS","setOrderTransactionHash","SET_ORDER_TRANSACTION_HASH","createOrder","CREATE_ORDER","getOrder","GET_ORDER","GET_MERCHANT_INFO","createMerchant","history","CREATE_MERCHANT","merchant","setCreateMerchantSuccess","merchantName","memberAddress","CREATE_MERCHANT_SUCCESS","BUILD_CONFIG","getMeApi","getTickersApi","getMerchantInfoApi","createNewOrder","order","getOrderApi","linkOrderTransaction","nativeAmount","createNewMerchant","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","TransactionState","userState","isLogged","loading","tickers","transactionInfo","transactionInProgress","INITIAL","accountInfo","transactionData","userInfo","rootState","userReducer","initialState","handlers","state","produce","draft","_ref6","setMerchantInfo","_ref4","_ref5","_ref8","setOrderData","action","hasOwnProperty","_ref7","merchantInfo","_ref9","rootReducer","combineReducers","root","takeLatest","LOGIN_REQUEST","watchGetEnsName","watchGetTickers","watchCreateTransactions","watchUnsetTransaction","watchCreateNewOrder","watchLinkOrderTransaction","watchGetMerchantInfo","watchGetOrderInfo","watchCreateMerchant","ens","getName","getAddress","call","toAddress","status","transactionOrder","fork","userSaga","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","rootSaga","configStore","JsonRpcContext","JsonRpcContextProvider","pending","setPending","setResult","isTestnet","setIsTestnet","_createJsonRpcRequestHandler","rpcRequest","trx","_err$message","errorResult","valid","_verifyEip155MessageSignature","verifyMessage","toLowerCase","ethereumRpc","testSendTransaction","caipAccountAddress","find","gasPriceBigN","gasLimitBigN","totalGasFees","mul","lt","ETH_SEND_TRANSACTION","transactionCostBigN","add","testSignTransaction","tx","signedTx","ETH_SIGN_TRANSACTION","EthTransaction","fromSerializedTx","verifySignature","rpcResult","testSignPersonalMessage","Date","now","testEthSign","ETH_SIGN","ping","isRpcRequestPending","resources","en","special","es","i18next","initReactI18next","LanguageDetector","fallbackLng","ns","Main","React","lazy","module","default","ReactDOM","render","Suspense","fallback","Router","Switch","Route","path","component","ErrorPage","src","logoIcon","alt","promo1","promo2","promo3","ToastContainer","toastClassName","bodyClassName","autoClose","icon","position","hideProgressBar","closeOnClick","document","getElementById","ENS","require","getEnsAddress","provider","ethers","JsonRpcProvider","Web3","ensAddress"],"mappings":"wqBAEO,MAAMA,EAAkB,I,MAC1BC,G,qBCDE,MAsBMC,EAAiBC,cAXK,CAEjC,YAbiC,CACjC,YAwBWC,EAAqB,mCACrBC,EAAoB,gCAI3BC,EAAUH,cAAkB,qCAAsC,gCAI3DI,GAHYJ,cAGW,CAClCK,KAAM,iBACNC,YAAa,sBACbC,IAAKJ,EACLK,MAAO,CAAC,oCAaH,IAAKC,EAOAC,EAQAC,EAKAC,EAKAC,EAKAC,GAzBX,SALWL,KAAsB,2CAAtBA,EAAsB,2CAAtBA,EAAsB,oBAAtBA,EAAsB,8BAKjC,CALWA,MAAsB,KAYlC,SALYC,KAAsB,iCAAtBA,EAAsB,uCAKlC,CALYA,MAAsB,KAWjC,SAHWC,KAAsB,uCAAtBA,EAAsB,qCAGjC,CAHWA,MAAsB,KAKtBC,MAAqB,IAQhC,SAHWC,KAAsB,8CAAtBA,EAAsB,sCAGjC,CAHWA,MAAsB,KAKtBC,MAAqB,G,kNCzE1B,MAYMC,EAAkCC,IAC3C,OAAQA,GACJ,IAAK,SAAS,CACV,IAAIC,EAASC,OAAOD,OAAOR,KAE3B,OADAU,QAAQC,IAAI,oBAADC,OAAqBJ,EAAM,oBAAAI,OAAmBL,IAClDC,CACX,CACA,IAAK,SACD,OAAOC,OAAOD,OAAON,KACzB,IAAK,SACD,OAAOO,OAAOD,OAAOJ,KACzB,QACI,MAAM,IAAIS,MAAM,qCAADD,OAAsCL,IAC7D,EAGSO,EAAiCP,IAC1C,OAAQA,GACJ,IAAK,SACD,OAAOE,OAAOD,OAAOP,KACzB,IAAK,SACD,OAAOQ,OAAOD,OAAOL,KACzB,IAAK,SACD,OAAOM,OAAOD,OAAOH,KACzB,QACI,MAAM,IAAIQ,MAAM,oCAADD,OAAqCL,IAC5D,EAGSQ,EAAyBC,IAClC,MAAMC,EA1C8BD,KACpC,MAAME,EAAgC,GAQtC,OAPAF,EAAOG,SAAQC,IACX,MAAOb,GAAaa,EAAQC,MAAM,KAC7BH,EAAoBI,SAASf,IAC9BW,EAAoBK,KAAKhB,EAC7B,IAGGW,CAAmB,EAiCCM,CAAwBR,GAOnD,OANAN,QAAQC,IAAI,uBAAwBM,GAM7BR,OAAOgB,YACVR,EAAmBS,KAAInB,GAAa,CAChCA,EACA,CACIoB,QAASrB,EAA+BC,GACxCS,OAAQA,EAAOY,QAAOC,GAASA,EAAMC,WAAWvB,KAChDwB,OAAQjB,EAA8BP,OAGjD,E,8CC1CL,MAAMyB,EAAiB,EACjBC,EAAmB,oBACnBC,EAAc,iBAkCPC,EAAgBC,wBAAwB,CAAC,GAK/C,SAASC,EAAqBC,GAAuD,IAAtD,SAAEC,GAAiDD,EACvF,MAAOE,EAAQC,GAAaC,sBACrBC,EAAUC,GAAeF,mBAAgC,KACzDG,EAASC,GAAcJ,qBACxBK,EAAWC,eAEVC,EAAWC,GAAgBR,sBAC3BS,EAAaC,GAAkBV,oBAAS,IACxCW,EAAoBC,GAAyBZ,oBAAS,IACtDa,EAAgBC,GAAqBd,oBAAS,IAC9Ce,EAAWC,GAAgBhB,oBAAS,IAEpCiB,EAASC,GAAclB,sBACvBmB,EAAUC,GAAepB,mBAAmB,KAC5CqB,EAAkBC,GAAuBtB,sBACzC1B,EAAQiD,GAAavB,mBAAmBpD,MAExC4E,EAAUC,GAAezB,mBAA0B,CAAC,IAEpD0B,EAAeC,GAAoB3B,mBAA8B,CAAC4B,gBAAgB,EAAOC,gBAAgB,IAEhH,IAAIC,EAAWC,cAAcD,SAE7B,MAAME,EAAQA,KACZhE,QAAQiE,KAAK,sBACb/B,EAAY,IACZM,OAAa0B,GACbT,EAAY,CAAC,GACbrB,OAAW8B,GACXhB,OAAWgB,GACXd,EAAY,IACZG,EAAU,IAEV,IAAK,IAAIY,EAAI,EAAGA,EAAIC,aAAaC,OAAQF,IAAK,CAC5C,MAAMG,EAAMF,aAAaE,IAAIH,GACzBG,GAAOA,EAAI1D,SAASW,IACtB6C,aAAaG,WAAWD,EAE5B,CACAF,aAAaG,WAAW/C,EAAY,EAGhCgD,GAAqBC,UACzBzE,QAAQiE,KAAK,4BACbrB,GAAsB,GACtB,IAEE,MAAM8B,QAAYC,QAAQC,IACtBC,EAAU7D,KAAIyD,UACZ,MAAO5E,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAChDD,EAAO,GAAAR,OAAML,EAAS,KAAAK,OAAI4E,GAC1BE,QAAeC,IAAcC,kBAAkBH,EAASrE,GAG9D,OAFAV,QAAQiE,KAAK,+BAAD/D,OAAgCQ,EAAO,aAAAR,OAAY6E,EAAO,wCAAA7E,OACpD8E,EAAOG,OAAM,KAAAjF,OAAI8E,EAAOI,UACnC,CAAEnC,UAAS+B,OAAQ,CAACA,GAAS,KAIpCxB,EAA4B,CAAC,EACnCkB,EAAIjE,SAAQ4E,IAA0B,IAAzB,QAAEpC,EAAO,OAAE+B,GAAQK,EAC9B7B,EAASP,GAAW+B,CAAM,IAE5BvB,EAAYD,EACd,CAAE,MAAO8B,GACPtF,QAAQuF,MAAM,2CAADrF,OAA4CoF,GAC3D,CAAC,QACC1C,GAAsB,EACxB,GAGI4C,GAAqBC,uBAAYhB,UACrC,MAAMiB,EAAuB3F,OAAOD,OAAO6F,EAASC,YAC/C5E,KAAInB,GAAaA,EAAUsD,WAC3B0C,OACCC,EAAqB/F,OAAOgG,KAAKJ,EAASC,YAChDxD,EAAWuD,GACXpC,EAAUuC,GACV1C,EAAYsC,GACZpC,EC/IG,SAAmCH,GACxC,OACEA,EAEGjC,QAAO+B,GAAWA,EAAQ7B,WAAW,aAErC4E,QAAO,CAAChF,EAAgCiC,KACvC,MAAM8B,EAAU9B,EAAQtC,MAAM,KAAKsF,MACnC,IAAKlB,EACH,MAAM,IAAI5E,MAAM,sDAADD,OAAuD+C,IAGxE,OADAjC,EAAI+D,GAAW,IAAImB,IAAUnB,GACtB/D,CAAG,GACT,CAAC,EAEV,CDgIwBmF,CAA0BT,UACxClB,GAAmBkB,EAAqB,GAC7C,IAgBH,SAASU,GAAiBnD,EAAiBS,GACpCA,EAAcE,eAGjByC,GAAqBpD,GAFrBqD,GAAMrD,EAIV,CAnBAsD,qBAAU,KACHzC,IAGDA,EAAS1C,WAAW,wBACtBsC,EAAcE,gBAAiB,EAE/BF,EAAcE,gBAAiB,EAEjCD,EAAiBD,GAAc,GAE9B,CAACI,IAUJyC,qBAAU,KACR,IAAKpD,EAASkB,OACZ,OAGF,MAAMpB,EAAUmB,aAAaoC,QAAQhF,GACrC,IAAK2B,EAASkB,OACZ,OAEF,MAAMoC,EAAoBtD,EAASjC,QAAOwF,IAAMA,EAAEtF,WAAW,YAEzD6B,GAAWwD,EAAkB7F,SAASqC,GACxCmD,GAAiBnD,EAASS,GACjB+C,EAAkB,GAC3BL,GAAiBK,EAAkB,GAAI/C,IAEvCiD,IAAMpB,MAAM,yBACZqB,KACF,GACC,CAACzD,EAAUO,IA0Bd,MAAM4C,GAAQb,uBACZhB,UACE,IACEzB,GAAa,GACb,MAAM6D,EAAYC,OAEXjH,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAEhDoG,EAAWD,IAAOC,SAASD,MAASE,KAAKH,IAAYI,YACrDC,EAAW5F,EAAiByF,EAE9BG,EAAW,SACPC,YAAiB,IAAXD,GAGdhE,EAAWD,GACXmB,aAAagD,QAAQ5F,EAAayB,GAElCZ,EAASgF,IAAWC,aAAa,CAAEvC,QAASA,EAASlF,UAAWA,EAAWiF,UAAWA,IAExF,CAAE,MAAOyC,GACPnD,aAAaG,WAAW,GAADrE,OAAIqB,EAAgB,KAAArB,OAAI+C,IAC/C0D,IAAMpB,MAAMgC,EAAIC,SAChBxH,QAAQuF,MAAM,oBAADrF,OAAqBqH,EAAG,KAAArH,OAAO,OAAHqH,QAAG,IAAHA,OAAG,EAAHA,EAAKC,QAAO,uBACrDZ,IACF,CAAC,QACC5D,GAAa,EACf,IAEF,CAAClB,EAAQK,IAILkE,GAAuBZ,uBACzBhB,UACE,IACEzB,GAAa,GACb,MAAM6D,EAAYC,OAEXjH,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAEtD,IACE,MAAM8G,QAAiBC,IAAYC,SAAS5C,GACxB0C,EAASG,KAAKC,OAKhC7H,QAAQ8H,KAAK,gCACbpE,EAAcG,gBAAiB,IAJ/B7D,QAAQ8H,KAAK,gBACbpE,EAAcG,gBAAiB,GAKjCF,EAAiBD,EACnB,CAAE,MAAO4B,GACPtF,QAAQC,IAAIqF,EACd,CAGA,MAAMyC,QAAYL,IAAYM,SAASjD,GACvC,IAAI8C,EAAQE,EAAIH,KAAKC,MAErB,IAAKA,EAEH,MADA7H,QAAQ8H,KAAK,yCACP,IAAI3H,MAAM4H,EAAIH,KAAKJ,SAG3B,IAAIS,EAA2B7D,aAAaoC,QAAQ,GAADtG,OAAIqB,EAAgB,KAAArB,OAAI+C,IACtEgF,IACHA,QA3FVxD,eAAyBxB,EAAiB4E,GACxC,MAAOhI,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAChD6G,EAAUK,EAIVK,EAAS,CAHAC,IAAmBX,GAAS,GAGnBzC,GAElBkD,QAAwB,OAANnG,QAAM,IAANA,OAAM,EAANA,EAAQsG,QAAgB,CAC9CC,MAAOlG,EAASkG,MAChB3H,QAAQ,GAADR,OAAKL,EAAS,KAAAK,OAAI4E,GACzBsD,QAAS,CACPE,OAAQhJ,IAAuBiJ,cAC/BL,aAQJ,OAJID,GACF7D,aAAagD,QAAQ,GAADlH,OAAIqB,EAAgB,KAAArB,OAAI+C,GAAWgF,GAGlDA,CACT,CAqE4BO,CAAUvF,EAAS4E,IAAU,MAG7CI,GACFQ,IAAMC,sBAAsBT,GAC5BQ,IAAME,SAASd,IAEflB,YAAM,qBAGR,MAAMI,EAAWD,IAAOC,SAASD,MAASE,KAAKH,IAAYI,YACrDC,EAAW5F,EAAiByF,EAE9BG,EAAW,SACPC,YAAiB,IAAXD,GAGdhE,EAAWD,GACXmB,aAAagD,QAAQ5F,EAAayB,GAElCZ,EAASgF,IAAWC,aAAa,CAAEvC,QAASA,EAASlF,UAAWA,EAAWiF,UAAWA,KACtFzC,EAASgF,IAAWuB,qBAAqB,CAAC7D,QAASA,IAIrD,CAAE,MAAOwC,GACPnD,aAAaG,WAAW,GAADrE,OAAIqB,EAAgB,KAAArB,OAAI+C,IAC/CjD,QAAQuF,MAAM,mCAADrF,OAAoCqH,EAAG,KAAArH,OAAO,OAAHqH,QAAG,IAAHA,OAAG,EAAHA,EAAKC,UAC7Db,IAAMpB,MAAM,UAADrF,OAAWqH,EAAIC,QAAO,KAInC,CAAC,QACCxE,GAAa,EACf,IAEF,CAAClB,EAAQK,EAASuB,IAGhBmF,GAAUpD,uBACdhB,UACE,IAEE,GADAzE,QAAQC,IAAI,iBACU,qBAAX6B,EACT,MAAM,IAAI3B,MAAM,oCAElBH,QAAQC,IAAI,6BAAqC,OAAP6I,QAAO,IAAPA,OAAO,EAAPA,EAAST,OACnD,MAAMU,EAAqB1I,EAAsBC,GACjDN,QAAQC,IAAI,yCAA0C8I,GAEtD,IAAIC,EAAgB,CAClBC,aAAqB,OAAPH,QAAO,IAAPA,OAAO,EAAPA,EAAST,MACvBU,sBAEF,MAAM,IAAEG,EAAG,SAAEC,SAAmBrH,EAAO+G,QAAQG,GAG3CE,GACF1G,EAAa0G,GAGf,MAAM/G,QAAgBgH,IACtBnJ,QAAQC,IAAI,uBAAwBkC,SAC9BqD,GAAmBrD,GAEzBD,EAAYJ,EAAOgH,QAAQM,OAAO,CAAEC,QAAQ,IAC9C,CAAE,MAAO/D,GACPqB,IAAMpB,MAAM,kBAADrF,QAAoB,OAADoF,QAAC,IAADA,OAAC,EAADA,EAAGkC,UAAW,IAC9C,CACE,GAGJ,CAAClH,EAAQwB,EAAQ0D,KAGboB,GAAanB,uBAAYhB,UAC7B,IACE,GAAsB,qBAAX3C,EACT,MAAM,IAAI3B,MAAM,oCAElB,GAAuB,qBAAZgC,EACT,MAAM,IAAIhC,MAAM,kCAEZ2B,EAAO8E,WAAW,CACtByB,MAAOlG,EAAQkG,MACfiB,OAAQC,YAAY,uBAGtBvF,GACF,CAAE,MAAOuD,GACPvH,QAAQC,IAAI,oBAADC,OAAwB,OAAHqH,QAAG,IAAHA,OAAG,EAAHA,EAAKC,SAEvC,IACC,CAAC1F,EAAQK,IAENqH,GAAkB/D,uBACpBhB,UACE,IACE,IAAK3C,EACH,MAAM,IAAI3B,MAAM,oCAElB,IAAKgC,EACH,MAAM,IAAIhC,MAAM,kCAEZqE,GAAmBK,EAC3B,CAAE,MAAO0C,GACPZ,IAAMpB,MAAM,2CAADrF,OAA4CqH,EAAIC,SAC7D,IAEF,CAAC1F,EAAQK,IAGPsH,GAAgBhE,uBACpBhB,UACE,IAEE,GADAvB,OAAWgB,IACNpC,EACH,MAAM,IAAI3B,MAAM,oCAGlB,IAAKgC,EACH,MAAM,IAAIhC,MAAM,4BAElBH,QAAQC,IAAI,WAAYyJ,GACxBpD,GAAMoD,EACR,CAAE,MAAOnC,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,IAEF,CAAC1F,EAAQK,IAGLwH,GAAqBlE,uBACzBhB,UACE,GAAuB,qBAAZmF,EACT,OAAOjD,IAAMpB,MAAM,oCAErBqE,EAAQC,GAAG,gBAAgBC,IACzB9J,QAAQC,IAAI,QAAS,eAAgB6J,EAAK,IAG5CF,EAAQC,GAAG,gBAAgBC,IACzB9J,QAAQ8H,KAAK,kCAAD5H,OAAmC4J,GAAO,IAGxDF,EAAQC,GAAG,iBAAiBC,IAC1B9J,QAAQC,IAAI,QAAS,gBAAiB6J,EAAK,IAG7CF,EAAQC,GAAG,kBAAkBE,IAAwB,IAAvB,MAAE1B,EAAK,OAAEH,GAAQ6B,EAC7C/J,QAAQC,IAAI,QAAS,iBAAkB,CAAEoI,QAAOH,WAChD,MAAM,WAAEtC,GAAesC,EAEjB8B,EAAiB,IADNJ,EAAQzH,QAAQ8H,IAAI5B,GACCzC,cACtCJ,GAAmBwE,EAAe,IAGpCJ,EAAQC,GAAG,kBAAkB,KAC3B7J,QAAQC,IAAI,QAAS,kBACrB+D,GAAO,GACP,GAEJ,CAACwB,KAIG0E,GAAuBzE,uBAC3BhB,UACE,GAAuB,qBAAZmF,EACT,OAAOjD,IAAMpB,MAAM,oCAOrB,GAJArD,EAAY0H,EAAQd,QAAQhJ,QAC5BE,QAAQC,IAAI,sBAAuB2J,EAAQd,QAAQhJ,QAG5B,qBAAZqC,GAEPyH,EAAQzH,QAAQkC,OAAQ,CAC1B,MAAM8F,EAAeP,EAAQzH,QAAQ4D,KAAK1B,OAAS,EAC7CsB,EAAWiE,EAAQzH,QAAQ8H,IAAIL,EAAQzH,QAAQ4D,KAAKoE,IAG1D,OAFAnK,QAAQC,IAAI,oBAAqB0F,SAC3BH,GAAmBG,GAClBA,CACT,IAEF,CAACxD,EAASqD,KAGN4E,GAAe3E,uBAAYhB,UAC/B,IACE3B,GAAkB,GAElB,MAAM8G,QAAgBS,IAAOC,KAAK,CAEhCC,SAAUxL,IACVyL,UAAW1L,IACX2L,SAAUC,eAAoBzL,MAEhCe,QAAQC,IAAI,mBAAoB2J,GAChC7H,EAAU6H,SACJD,GAAmBC,SACnBM,GAAqBN,GAC3BlH,GAAe,EACjB,CAAE,MAAO6E,GACP,MAAMA,CACR,CAAC,QACCzE,GAAkB,EACpB,IACC,CAACoH,GAAsBP,KAE1BpD,qBAAU,KACR,IAAKzE,EACH,IACEsI,KAAeO,MAAKC,IAClB5K,QAAQ6K,MAAM,sBAAD3K,OAAuB0K,GAAQ,IAC3CE,OAAMxB,IACPtJ,QAAQuF,MAAM,mCAADrF,OAAoCoJ,GAAS,GAE9D,CAAE,MAAOhE,GACPtF,QAAQuF,MAAM,2BAADrF,OAA4BoF,GAC3C,CACF,GACC,CAACxD,EAAQsI,KAEZ,MAAMQ,GAAQG,mBACZ,MACE9I,WACAY,iBACAJ,cACAF,YACAQ,YACAE,UACAE,WACAK,WACAH,mBACA/C,SACAwB,SACAK,UACA0G,WACAjC,cACA4C,mBACAjG,YACAkG,iBACA/F,mBAEF,CACEzB,EACAY,EACAE,EACAN,EACAF,EACAU,EACAE,EACAK,EACAH,EACA/C,EACAwB,EACAK,EACA0G,GACAjC,GACA4C,GACAjG,EACAkG,GACA/F,IAIJ,OACEsH,cAACvJ,EAAcwJ,SAAQ,CACrBL,MAAO,IACFA,IACH/I,SAEDA,GAGP,CAEO,SAASqJ,IACd,MAAMC,EAAUC,qBAAW3J,GAI3B,YAHgByC,IAAZiH,GACFxE,IAAMpB,MAAM,sEAEP4F,CACT,C,oCExjBA,uJAqCO,SAASE,IAAkD,IAAnCtG,EAAOuG,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,GAAIC,EAAKD,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,GACnD,MAAM,GAANpL,OAAU6E,EAAQyG,MAAM,EAAGD,GAAM,OAAArL,OAAM6E,EAAQyG,OAAOD,GACxD,CA6GO,MAAME,EAAmB,SAACb,GAA0C,IAA3Bc,EAAQJ,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,GACzD,MAAOK,EAASC,GAAchB,EAAMjK,MAAM,KACpCkL,EAAcD,EAAaA,EAAWE,UAAU,EAAGJ,GAAUK,QAAQ,QAAS,SAAM7H,EAC1F,OAAO2H,EAAc,CAACF,EAASE,GAAaG,KAAK,KAAOL,CAC1D,EAEaM,EAAQ,SAACC,GAA8C,IAA9BR,EAAQJ,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,GAC/C,OAAOa,QAAMC,WAAWX,EAAiBS,EAAQR,GAAWA,EAC9D,EAMaW,EAA2B,UAC3BC,GAAgC,EAMtC,SAASC,IACd,IAAI3B,EAAQ0B,EACZ,MAAME,EAAYC,OAAOrI,aAAaoC,QAAQ6F,GAQ9C,OAPKG,EAIH5B,EAAsB,SAAd4B,GAHRxM,QAAQ6K,MAAM,kBAAD3K,OAAmB0K,EAAK,2BARlC,SAAqCA,GAC1C6B,OAAOrI,aAAagD,QAAQiF,EAAyB,GAADnM,OAAK0K,GAC3D,CAOI8B,CAA4B9B,IAKvBA,CACT,C,gOC9KA,MAAM+B,EAA6BlE,IAAMmE,OAAO,CAC5CC,QAAS,2BACTC,QAAS,IACTC,QAAS,CACLC,OAAQ,mBACR,eAAgB,sB,YCPxB,MAAMC,EAA6BxE,IAAMmE,OAAO,CAC5CC,QAASK,IACTJ,QAAS,IACTC,QAAS,CACLC,OAAQ,mBACR,eAAgB,sBAIlBG,EAAiC1E,IAAMmE,OAAO,CAChDC,QAASO,IACTN,QAAS,IACTC,QAAS,CACLC,OAAQ,mBACR,eAAgB,sBAIjBvI,eAAe4I,EAAwBtI,EAAiBrE,GAC3D,MAAMkH,EAAO,CACT,QAAW,MACX,OAAU,iBACV,OAAU,CAAC7C,EAAS,UACpB,GAAM,GAEV,OAAIrE,EAAQE,SAAS,SAsBzB6D,eAA8CmD,GAC1C,MAAM0F,QAAiBH,EAAgBI,KACnC,GACA3F,IAEE,OAAE4F,GAAWF,EAAS1F,KAQ5B,MAPkB,CACdzC,OAAQ,QACRjG,KAAM,QACNwM,SAAU,KACV+B,gBAAiB,GACjBrI,QAASoI,EAGjB,CAnCeE,CAA+B9F,GAK9CnD,eAA0CmD,GACtC,MAAM0F,QAAiBL,EAAYM,KAC/B,GACA3F,IAEE,OAAE4F,GAAWF,EAAS1F,KAQ5B,MAPkB,CACdzC,OAAQ,MACRjG,KAAM,QACNwM,SAAU,KACV+B,gBAAiB,GACjBrI,QAASoI,EAGjB,CAjBWG,CAA2B/F,EACtC,CAuCO,MAgBMgG,EAA6BnJ,MAAOoJ,EAAcnN,KAC3D,MAAMkH,EAAO,CACT,QAAW,MACX,OAAU,2BACV,OAAU,CAACiG,GACX,GAAM,GAEJP,QAAiBL,EAAYM,KAC/B,GACA3F,IAEE,OAAE4F,GAAWF,EAAS1F,KAE5B,OADA5H,QAAQiE,KAAK,oBAAD/D,OAAqBsN,IAC1BA,CAAM,E,aCnFV,MAAMM,EACT5I,kBAAkBH,EAAiBrE,GAC/B,OAAO2M,EAAwBtI,EAASrE,EAC5C,CAEAqN,gBAAgBhJ,EAAiBrE,GAC7B,MDqF6B+D,OAAOM,EAAiBrE,KACzD,MAAMkH,EAAO,CACT,QAAW,MACX,OAAU,mBACV,OAAU,CAAC7C,GACX,GAAM,GAEJuI,QAAiBL,EAAYM,KAC/B,GACA3F,IAEE,OAAE4F,GAAWF,EAAS1F,KAE5B,OADA5H,QAAQiE,KAAK,cAAD/D,OAAesN,IACpBA,CAAM,EClGFQ,CAAsBjJ,EACjC,CAIAkJ,aAAavN,GACT,MD+F0B+D,WAC9B,MAMM6I,QAAiBL,EAAYM,KAAK,GAN3B,CACT,QAAW,MACX,OAAU,eACV,OAAU,GACV,GAAM,KAGJ,OAAEC,GAAWF,EAAS1F,KAE5B,OADA5H,QAAQ6K,MAAM,yBAAD3K,OAA0BQ,EAAO,cAAAR,OAAasN,IACpDA,CAAM,ECzGFU,CAAmBxN,EAC9B,CAEAyN,qBAAqBpJ,EAAiBrE,GAClC,OAAOkN,EAA2B7I,EACtC,CAEAqJ,uBAAuBrJ,EAAiBrE,GACpC,OAAOiE,QAAQ0J,QAAQ,GAC3B,EAOG,MAAMC,EACTpJ,kBAAkBH,EAAiBrE,GAC/B,OFxBD+D,eAAoCM,EAAiBrE,GACxD,MAAM6N,EAAa7N,EAAQC,MAAM,KAAK,GAChC2M,QAAiBX,EAAY1C,IAAI,4BAAD/J,OACN6E,EAAO,aAAA7E,OAAYqO,KAE7C,OAAEf,GAAWF,EAAS1F,KAC5B,OAAO4F,CACX,CEiBegB,CAAqBzJ,EAASrE,EACzC,CAEAqN,gBAAgBhJ,EAAiBrE,GAC7B,MFP0B+D,OAAOM,EAAiBrE,KACtD,MAAM6N,EAAa7N,EAAQC,MAAM,KAAK,GAChC2M,QAAiBX,EAAY1C,IAAI,0BAAD/J,OAA2B6E,EAAO,aAAA7E,OAAYqO,KAC9E,OAAEf,GAAWF,EAAS1F,KAC5B,OAAO4F,CAAM,EEGFiB,CAAmB1J,EAASrE,EACvC,CAEA,kBAAMuN,CAAavN,GACf,MAAMgO,OFHiBjK,WAC3B,MAAM8J,EAAa7N,EAAQC,MAAM,KAAK,GACtCX,QAAQiE,KAAK,gCAAD/D,OAAiCQ,EAAO,iBAAAR,OAAgBqO,IACpE,MAAMjB,QAAiBX,EAAY1C,IAAI,uBAAD/J,OAAwBqO,KACxD,OAAEf,GAAWF,EAAS1F,KAC5B,OAAO4F,CAAM,EEFemB,CAAgBjO,GAExC,OADAV,QAAQiE,KAAK,kBAAD/D,OAAmBwO,IACxBzC,YAAM,GAAD/L,OAAIwO,EAAUE,KAAKC,OAAS,GAAGC,aAC/C,CAEA,4BAAMV,CAAuBrJ,EAAiBrE,GAC1C,OF7BD+D,eACHM,EACArE,GAEA,MAAM6N,EAAa7N,EAAQC,MAAM,KAAK,GAChC2M,QAAiBX,EAAY1C,IAAI,iCAAD/J,OACD6E,EAAO,aAAA7E,OAAYqO,KAElD,OAAEf,GAAWF,EAAS1F,KAC5B,OAAO4F,CACX,CEmBeuB,CAA0BhK,EAASrE,EAC9C,CAEAyN,qBAAqBpJ,EAAiBrE,GAElC,MAAM,IAAIP,MAAM,WACpB,EC3DG,MAAM8E,EAAwB,ID8D9B,MAAyC+J,cAAA,KAC5CC,aAAuB,IAAInB,EAAY,KACvCoB,kBAAoB,IAAIZ,CAAiB,CAEzCpJ,kBAAkBH,EAAiBrE,GAC/B,OAAIA,EAAQE,SAAS,gBAEVuO,KAAKF,aAAa/J,kBAAkBH,EAASrE,GAEjDyO,KAAKD,kBAAkBhK,kBAAkBH,EAASrE,EAC7D,CAEAqN,gBAAgBhJ,EAAiBrE,GAI7B,OAAOyO,KAAKD,kBAAkBnB,gBAAgBhJ,EAASrE,EAC3D,CAEA,kBAAMuN,CAAavN,GAKf,OAAOyO,KAAKD,kBAAkBjB,aAAavN,EAC/C,CAEA0N,uBAAuBrJ,EAAiBrE,GACpC,OAAOyO,KAAKD,kBAAkBd,uBAAuBrJ,EAASrE,EAClE,CAEAyN,qBAAqBN,EAAcnN,GAC/B,OAAOkN,EAA2BC,EACtC,GC1DGpJ,eAAe2K,EAAoBnM,EAAiBoM,EAAoBC,GAC3E,MAEOzP,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAChDD,EAAO,GAAAR,OAAML,EAAS,KAAAK,OAAI4E,GAEhC,IAAIyK,EACJ,IACIA,QAAetK,EAAc8I,gBAAgBhJ,EAASrE,EAC1D,CAAE,MAAO6E,GACL,MAAM,IAAIpF,MAAM,qCAADD,OAAsC6E,EAAO,cAAA7E,OAAaQ,GAC7E,CAEA,MAAMmH,EAAQM,IAAqBA,IAAqBoH,IAElDC,QAlDH/K,eAA2B/D,GAI9B,aADwBuE,EAAcgJ,aAAavN,EAEvD,CA6C4B+O,CAAY/O,GACpCV,QAAQiE,KAAK,qBAAD/D,OAAsBsP,IAElC,MAAME,EAAWC,EAAkBC,OAAOJ,IAKpCK,EAAWF,EADC,OAGZG,EAAS7D,YAAMoD,EAAWU,YAChC/P,QAAQiE,KAAK,eAAD/D,OAAgBmP,EAAU,cAAAnP,OAAa4P,EAAM,MAczD,MADW,CAAEE,KAAMjL,EAASkL,GAtCV,6CAsCyBrI,KAF9B,KAE0CC,MAAOA,EAAO6H,SAAUA,EAAUG,SAAUA,EAAUjF,MAV/FzC,IAAqB2H,EAAOhB,eAY9C,CAGO,MAAMa,EAAqB/E,IAC9B,MAAMsF,EAAOC,IAAKhE,MAAMiE,YAAYxF,GAEpC,OADkBzC,IAAqB+H,EACvB,EA2Cb,SAASG,EAAyBlN,EAAoBK,GACzD,IAAI8M,EAAgB,OAChBC,EAAsBpN,EAAS,GAC/BqN,EAAiBC,IAAUT,KAAK,GAChCU,EAAoBD,IAAUT,KAAK,GACnCW,EAA8B,KA2BlC,OA1BAxN,EAAS1C,SAAQmK,IACb,IAAIgG,EAAkBpN,EAASoH,GAC/B,IAAKgG,EAED,YADA5Q,QAAQiE,KAAK,8DAAD/D,OAA+D0K,IAG/E,IAAIiG,EAAiBD,EAAgB,GACjCxL,EAAUqL,IAAUT,KAAK,GAC7B,IACI5K,EAAUqL,IAAUT,KAAKa,EAAezL,SAAW,IACvD,CACA,MAAOE,GACHtF,QAAQC,IAAI,uBAADC,OAAwBoF,GACvC,CAEA,GAAIF,EAAQ0L,GAAG,IAAsB,MAAhBH,EAAsB,CACvC,IAAII,EAAc5E,QAAM4E,YAAY3L,GACpCpF,QAAQ6K,MAAM,2BAAD3K,OAA4B0K,EAAK,kBAAA1K,OAAiBkF,EAAO,wBAAAlF,OAAuB6Q,IAE7FR,EAAsB3F,EACtB4F,EAAiBrE,QAAMC,WAAWhH,EAAQ2K,WAAY,SACtDW,EAAoBF,EACpBF,EAAgBS,EAChBJ,EAAeE,EAAe1L,MAClC,KAEG,CACH6L,MAAOL,GAAgB,MACvB1N,QAASsN,EACTnL,QAASoL,EACTS,WAAYP,EACZJ,cAAeA,EAEvB,C,mCC/KA,2HAGO,MAAMnJ,EAAQ1C,SACZ,IAAIE,SAAQ0J,GAAW6C,WAAW7C,EAAS8C,KAGvCC,EAA8BnO,GACrCA,EAEG,GAAN/C,OAAUmR,EAAqBpO,IAEzB,eAGHoO,EAAwBpO,IAC5B,MAAOpD,EAAWiF,GAAa7B,EAAQtC,MAAM,KAC7C,GAAI2Q,IAAUzR,IAAcyR,IAAUzR,GAAWiF,GAAY,CAE3D,OADkBwM,IAAUzR,GAAWiF,GACtB5F,IACnB,CACA,MAAO,EAAE,EAGEqS,EAAiBA,CAACtO,EAAiBuO,KAC9C,IAAItS,EAAO,GACX,GAAIsS,EACFtS,EAAOsS,OACF,GAAIvO,EAAS,CAClB,MAAOpD,EAAWiF,EAAWC,GAAW9B,EAAQtC,MAAM,KAEtD,GAAI2Q,IAAUzR,IAAcyR,IAAUzR,GAAWiF,GAAY,CAC3D,MAAM2M,EAAYH,IAAUzR,GAAWiF,GACvC9E,QAAQiE,KAAK,aAAD/D,OAAcuR,EAAUtM,OAAM,KAAAjF,OAAIuR,EAAUC,SAAQ,KAAAxR,OAAIuR,EAAUvS,OAC9EA,EAAOmM,YAAetG,EACxB,CACF,CACA,OAAO7F,CAAI,C,kCCrCN,IAAKP,E,kCAsBX,SAtBWA,KAAgB,mCAAhBA,EAAgB,mCAAhBA,EAAgB,gDAAhBA,EAAgB,iCAAhBA,EAAgB,qCAAhBA,EAAgB,mDAAhBA,EAAgB,2DAAhBA,EAAgB,iDAAhBA,EAAgB,2DAAhBA,EAAgB,+DAAhBA,EAAgB,qDAAhBA,EAAgB,2CAAhBA,EAAgB,uDAAhBA,EAAgB,iDAAhBA,EAAgB,iCAAhBA,EAAgB,iDAAhBA,EAAgB,2CAAhBA,EAAgB,2BAAhBA,EAAgB,6DAAhBA,EAAgB,uCAAhBA,EAAgB,uDAsB3B,CAtBWA,MAAgB,I,mCCA5B,kCAEO,MAAM2S,EAAiB,CAC5BK,MAAO,CACL,EAAK,CACHC,GAAI,UACJ1S,KAAM,cACN2S,IAAK,CAAC,oCACNC,OAAQ,GACRC,SAAS,EACTC,KAAM,WACNC,IAAK,eACL9M,OAAQ,QAeZ+M,OAAQ,CACN,mCAAoC,CAClCN,GAAI,0CACJ1S,KAAM,iBACN2S,IAAK,CAAC,sCAAuC,uCAC7CC,OAAQ,IACRC,SAAS,EACTC,KAAM,mBACNC,IAAK,UACL9M,OAAQ,QAGZgN,OAAQ,CACN,EAAK,CACHjT,KAAM,mBACN0S,GAAI,WACJC,IAAK,CAAC,mCACNC,OAAQ,GACRC,SAAS,EACTC,KAAM,gDACNC,IAAK,eACL9M,OAAQ,OAEV,GAAM,CACJjG,KAAM,iBACN0S,GAAI,YACJC,IAAK,CAAC,+DACNC,OAAQ,GACRC,SAAS,EACTC,KAAM,gDACNC,IAAK,eACL9M,OAAQ,OAEV,IAAO,CACLjG,KAAM,kBACN0S,GAAI,aACJC,IAAK,CAAC,qCACNC,OAAQ,GACRC,SAAS,EACTC,KAAM,kDACNC,IAAK,eACL9M,OAAQ,SAEV,MAAS,CACPjG,KAAM,iBACN0S,GAAI,eACJC,IAAK,CAAC,kCACNC,OAAQ,GACRC,SAAS,EACTC,KAAM,kDACNC,IAAK,eACL9M,OAAQ,U,mCC9Ed,mDAEO,MAAMiN,EAAUA,IACrBC,eAAA,OAAKC,UAAU,uFAAsFzQ,SAAA,CACnGmJ,cAAA,OAAKsH,UAAU,YAAWzQ,SACtBwQ,eAAA,OAAKC,UAAU,wBAAuBzQ,SAAA,CAClCmJ,cAAA,OAAKsH,UAAU,YACftH,cAAA,OAAKsH,UAAU,YACftH,cAAA,OAAKsH,UAAU,YACftH,cAAA,OAAKsH,UAAU,iBAGvBtH,cAAA,KAAGsH,UAAU,2BAA0BzQ,SAAC,iB,ohCCZ5C,6BAIA4G,IAAM8J,SAAS1F,QAAU,yBAGzB,MAOa2F,EAAaC,cAPX,yBAGC,+BAKhBhK,IAAM8J,SAAS1F,QAAU2F,EAEzB/J,IAAM8J,SAASxF,QAAQ2F,OAAO,gBAAkB,mBAEhDjK,IAAMkK,aAAarF,SAASsF,KAC1BtF,GAAYA,IACZ/F,IACEvH,QAAQiE,KAAK,eAAD/D,OAAgBqH,EAAI+F,SAAS1F,KAAKiL,KAAI,cAAA3S,OAAaqH,EAAI+F,SAAS1F,KAAKJ,UAEjF,MADcD,EAAI+F,UACH/F,CAAG,IAsFPuL,IAlFM,WACnB,IAAIC,EAA0B,GAC1BC,EAAa,GAEjB,SAASC,EAAWC,GAClB,MAAMC,EAAqB,CAAC,EAGxBJ,IACFI,EAA6B,cAAC,GAAAjT,OAAM6S,IAGlCC,IACFG,EAAc,oBAAmB,GAAAjT,OAAM8S,IAGzC,MAAM,QAAEjG,GAAYmG,EAGpB,MAAO,CACLnG,QAAS,IACJoG,KACApG,GAGT,CA2CA,MAAO,CACLrE,sBAzCF,SAA+BsI,GAC7B+B,EAAqB/B,CACvB,EAwCErI,SAtCF,SAAkBd,GAChBmL,EAAQnL,CACV,EAqCEoC,IAzBF,SAAamJ,GAAoC,IAAlBF,EAAU5H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3C,OAAO7C,IAAMwB,IAAImJ,EAAUH,EAAWC,GACxC,EAwBE3F,KArBF,SAAc6F,GAAiF,IAA/DlL,EAAMoD,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG4H,EAAU5H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG+H,IAAuB/H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,KAAAA,UAAA,GACnF,OAAO7C,IAAM8E,KAAK6F,EAAUlL,EAAQmL,EAAiBJ,EAAWC,GAAc,CAAC,EACjF,EAoBEI,IAbF,SAAaF,GAAiD,IAA/BlL,EAAMoD,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG4H,EAAU5H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxD,OAAO7C,IAAM6K,IAAIF,EAAUlL,EAAQ+K,EAAWC,GAChD,EAYEK,MAlBF,SAAeH,GAAiD,IAA/BlL,EAAMoD,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG4H,EAAU5H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC1D,OAAO7C,IAAM8K,MAAMH,EAAUlL,EAAQ+K,EAAWC,GAClD,EAiBEM,IAXF,SAAaJ,GAAoC,IAAlBF,EAAU5H,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3C,OAAO7C,IAAMgL,OAAOL,EAAUH,EAAWC,GAC3C,EAUEQ,SAxCF,WACE,OAAOV,CACT,EAuCEW,aArCF,WACE,OAAOZ,CACT,EAqCF,CAGeD,E,4SChGf,MAoIazL,EAAa,CACxBC,aArIoBsM,IACb,CACLC,KAAMlV,IAAiBmV,cACvBF,YAmIFG,sBA/H6BH,IACtB,CACLC,KAAMlV,IAAiBqV,sBACvBJ,YA6HFK,uBAzH8BL,IACvB,CACLC,KAAMlV,IAAiBuV,0BACvBN,YAuHFO,gBAhDuBP,IACvB5T,QAAQiE,KAAK,yBAAD/D,OAA0B0T,EAAQ1H,OAAM,KAAAhM,OAAI0T,EAAQQ,gBAAe,eAAAlU,OAAc0T,EAAQS,aAC9F,CACLR,KAAMlV,IAAiB2V,kBACvBV,YA6CFW,kBApHyBX,IAClB,CACLC,KAAMlV,IAAiB6V,qBACvBZ,YAkHFa,kBA9GyBb,IAClB,CACLC,KAAMlV,IAAiB+V,0BACvBd,YA4GFe,yBAxGgCf,IAChC5T,QAAQiE,KAAK,+BAAD/D,OAAgC0T,IACrC,CACLC,KAAMlV,IAAiBiW,4BACvBhB,YAqGFiB,yBAjGgCjB,IAA+B,IAADkB,EAAAC,EAE9D,OADA/U,QAAQiE,KAAK,gCAAD/D,OAAiC0T,EAAQoB,gBAAe,YAAA9U,OAA8B,QAA9B4U,EAAWlB,EAAQqB,mBAAW,IAAAH,OAAA,EAAnBA,EAAqBlK,MAAK,gBAAA1K,OAAkC,QAAlC6U,EAAenB,EAAQqB,mBAAW,IAAAF,OAAA,EAAnBA,EAAqB9E,KACtI,CACL4D,KAAMlV,IAAiBuW,qBACvBtB,UACD,EA6FDuB,qBA1F4BvB,IACrB,CACLC,KAAMlV,IAAiByW,uBACvBxB,YAwFFyB,iBApFuBA,KAChB,CACLxB,KAAMlV,IAAiB2W,oBAmFzBC,4BA/EmC3B,IAC5B,CACLC,KAAMlV,IAAiB6W,wBACvB5B,YA6EF6B,sBAzE6B7B,IAC7B5T,QAAQiE,KAAK,+BAAD/D,OAAgC0T,EAAQ1H,OAAM,KAAAhM,OAAI0T,EAAQQ,gBAAe,eAAAlU,OAAc0T,EAAQS,aACpG,CACLR,KAAMlV,IAAiB+W,qBACvB9B,YAsEF+B,wBAjD+B/B,IACxB,CACLC,KAAMlV,IAAiBiX,2BACvBhC,YA+CFiC,YAnCmBjC,IACZ,CACLC,KAAMlV,IAAiBmX,aACvBlC,YAiCFmC,SAtBgBnC,IACT,CACLC,KAAMlV,IAAiBqX,UACvBpC,YAoBFhL,qBA5C4BgL,IACrB,CACLC,KAAMlV,IAAiBsX,kBACvBrC,YA0CFsC,eA/BqBA,CAACtC,EAAoBuC,KACnC,CACLtC,KAAMlV,IAAiByX,gBACvBxC,QAAS,CAACyC,SAAUzC,EAASuC,QAASA,KA6BxCG,yBAtEgC1C,IAChC5T,QAAQiE,KAAK,kCAAD/D,OAAmC0T,EAAQ2C,aAAY,KAAArW,OAAI0T,EAAQ4C,gBACxE,CACL3C,KAAMlV,IAAiB8X,wBACvB7C,Y,0JCjGJ,wIAAO,MAUMnB,EAAYA,KAAMiE,EAGlB7X,EAAgBA,KAAM,EAYtBqO,EATsB,+DAUtBE,EANgB,kD,oGClBtB,MAAM1F,EAqCJ,CACLC,SArCelD,SACRgE,IAAMwB,IAAI,iBAAD/J,OAAkB0T,EAAO,WAqCzC+C,SAlCelS,SACRgE,IAAMwB,IAAI,oBAkCjB2M,cA/BoBnS,SACbgE,IAAMwB,IAAI,YA+BjB4M,mBAxByBpS,SAClBgE,IAAMwB,IAAI,cAAD/J,OAAe6E,IAwB/B+R,eAjBqBrS,MAAOM,EAAiBgS,IACtCtO,IAAM8E,KAAK,cAADrN,OAAe6E,EAAO,WAAWgS,GAiBlDC,YAtBkBvS,SACXgE,IAAMwB,IAAI,qBAAD/J,OAAsBoP,IAsBtC2H,qBAX2BxS,MAAO6K,EAAyB0F,EAAyBkC,IAC7EzO,IAAM8E,KAAK,qBAADrN,OAAsBoP,EAAe,gBAAgB,CAAC0F,gBAAiBA,EAAiBkC,aAAcA,IAWvHC,kBAhBwB1S,SACjBgE,IAAM8E,KAAK,oBAADrN,OAAqBuI,IAAMiL,WAAU,eAAAxT,OAAcuI,IAAMkL,gBAAkBoD,EAAO,CAAC,GAAG,GAgBvG/O,SAjCevD,SACRgE,IAAMwB,IAAI,cAAD/J,OAAe0T,EAAO,W,4LCH3BwD,MAZUC,IACnBA,GAAeA,aAAuBC,UACxC,8BAAqB3M,MAAK/I,IAAkD,IAAjD,OAAE2V,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GAAS/V,EACpE2V,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EAAY,GAExB,E,0BCEK,IAAKO,GAEX,SAFWA,OAAgB,qBAAhBA,IAAgB,6BAAhBA,IAAgB,uBAE3B,CAFWA,MAAgB,KCXrB,MAAMC,EAAwB,CACnCC,UAAU,EACVC,SAAS,EACTlQ,MAAO,GACP5E,QAAS,GACTuO,QAAS,GACTvJ,UAAW,GACX+P,QAAS,GACTC,gBAAiB,KACjBC,sBAAuBN,EAAiBO,QACxCC,iBAAalU,EACbmU,gBAAiB,KACjBC,cAAUpU,EACV6S,MAAO,MCRMwB,MAJe,CAC5BV,a,gBCYK,MAAMW,GCXoBC,EDWoBZ,ECXHa,EDWc,CAC9D,CAACha,IAAgBoV,eAanB,SAA+B6E,EAAiB/W,GAAuC,IAArC,QAAEgS,GAAgChS,EAClF,OAAOgX,YAAQD,GAAOE,IACpBA,EAAMd,SAAU,EAChBc,EAAMf,UAAW,EACjBe,EAAMT,YAAcxE,CAAO,GAE/B,EAlBE,CAAClV,IAAgB8V,sBAoBnB,SAA0BmE,EAAiBtT,GAAiC,IAA/B,QAAEuO,GAA0BvO,EACvE,OAAOuT,YAAQD,GAAOE,IACpBA,EAAMrH,QAAUoC,CAAO,GAE3B,EAvBE,CAAClV,IAAgBsV,uBA2CnB,SAAqB2E,EAAiBG,GAAoC,IAAlC,QAAElF,GAA6BkF,EACrE,OAAOF,YAAQD,GAAOE,IACpBA,EAAMP,SAAW1E,CAAO,GAE5B,EA9CE,CAAClV,IAAgBwV,2BAA4B6E,EAC7C,CAACra,IAAgBgW,2BAuBnB,SAA0BiE,EAAiB5O,GAAoC,IAAlC,QAAE6J,GAA6B7J,EAC1E,OAAO6O,YAAQD,GAAOE,IACpBA,EAAMb,QAAUpE,CAAO,GAE3B,EA1BE,CAAClV,IAAgBkW,6BA4BnB,SAAkC+D,EAAiBK,GAA2C,IAAzC,QAAEpF,GAAoCoF,EACzF,OAAOJ,YAAQD,GAAOE,IACpBA,EAAMX,sBAAwBtE,CAAO,GAEzC,EA/BE,CAAClV,IAAgBwW,sBAiCnB,SAA4ByD,EAAiBM,GAA2C,IAAzC,QAAErF,GAAoCqF,EACnF,OAAOL,YAAQD,GAAOE,IACpBA,EAAMZ,gBAAkBrE,CAAO,GAEnC,EApCE,CAAClV,IAAgB8W,yBAkDnB,SAA4BmD,EAAiBO,GAA4C,IAA1C,QAAEtF,GAAqCsF,EACpF,OAAON,YAAQD,GAAOE,IACpBA,EAAMR,gBAAkBzE,CAAO,GAEnC,EArDE,CAAClV,IAAgBgX,sBAAuByD,EACxC,CAACza,IAAgB4V,mBAAoB6E,EACrC,CAACza,IAAgB+X,yBAA0BsC,GCrBjC,WAAqD,IAApDJ,EAAQrN,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAGmN,EAAcW,EAAkB9N,UAAAjH,OAAA,EAAAiH,UAAA,QAAApH,EACpD,OAAIwU,EAASW,eAAeD,EAAOvF,MAC1B6E,EAASU,EAAOvF,MAAM8E,EAAOS,GAE7BT,CAEX,GAPK,IAA0BF,EAAiBC,ED+DlD,SAASK,EAAgBJ,EAAiBW,GAAoC,IAAlC,QAAE1F,GAA6B0F,EACzE,OAAOV,YAAQD,GAAOE,IACpBA,EAAMU,aAAe3F,CAAO,GAEhC,CAaA,SAASuF,EAAaR,EAAiBa,GAAiC,IAA/B,QAAE5F,GAA0B4F,EACnE,OAAOZ,YAAQD,GAAOE,IACpBA,EAAM9B,MAAQnD,CAAO,GAEzB,CCnEe6F,MAJbC,0BAAgB,CACd7B,UAAWW,I,iDCJA,SAAUmB,UACjB/U,YAAI,CACRgV,YAAWjb,IAAiBkb,cAAsBC,GAClDF,YAAWjb,IAAiBmV,cAAsBiG,GAElDH,YAAWjb,IAAiByW,uBAA+B4E,GAC3DJ,YAAWjb,IAAiB2W,kBAA0B2E,GAEtDL,YAAWjb,IAAiBmX,aAAqBoE,GAEjDN,YAAWjb,IAAiBiX,2BAAmCuE,GAE/DP,YAAWjb,IAAiBsX,kBAA0BmE,GAEtDR,YAAWjb,IAAiBqX,UAAkBqE,GAE9CT,YAAWjb,IAAiByX,gBAAwBkE,IAExD,CAEA,SAAUR,EAAgBV,GACxB,IACE,IAAI5H,EACAzM,EAAkB,KACnB7F,KAAMsS,SAAkB+I,IAAIC,QAAQpB,EAAOxF,UAE1CpC,IACFzM,QAAgBwV,IAAIrb,KAAKsS,GAASiJ,cAGhCjJ,GAAWzM,IAAYqU,EAAOxF,UAChCpC,EAAU,UAGN8B,YAAIjM,IAAWkN,kBAAkB/C,GACzC,CAAE,MAAOjK,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAWA,SAAU4S,EAAqBhB,GAC7B,IACEpZ,QAAQC,IAAI,wBACZ,MAAM8H,QAAsC2S,aAAK,IAAMhT,IAAYmP,mBAAmBuC,EAAOxF,QAAQ7O,iBAC/FuO,YAAIjM,IAAW4M,uBAAuBlM,EAAIH,MAClD,CAAE,MAAOL,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAU6S,EAAkBjB,GAC1B,IACEpZ,QAAQC,IAAI,sCAADC,OAAuCkZ,EAAOxF,QAAQtE,kBACjE,MAAMvH,QAAmC2S,aAAK,IAAMhT,IAAYsP,YAAYoC,EAAOxF,QAAQtE,yBACrFgE,YAAIjM,IAAW8M,gBAAgBpM,EAAIH,MAC3C,CAAE,MAAOL,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAU0S,EAAoBd,GAC5B,IACE,MAAMrR,QAAmC2S,aAAK,IAAMhT,IAAYoP,eAAesC,EAAOxF,QAAQ+G,UAAWvB,EAAOxF,WAC7F,MAAf7L,EAAI6S,QACN5a,QAAQuF,MAAM,oCAEhBvF,QAAQiE,KAAK,iDAAD/D,OAAkD6H,EAAIH,KAAKwM,gBAAe,YAAAlU,OAAW6H,EAAIH,KAAKsE,OAAM,iBAAAhM,OAAgB6H,EAAIH,KAAKyM,mBACnIf,YAAIjM,IAAWoO,sBAAsB1N,EAAIH,MACjD,CAAE,MAAOL,GACPvH,QAAQuF,MAAM,8BAADrF,OAA+BqH,IAC5CZ,IAAMpB,MAAM,SAADrF,OAAUqH,EAAIC,SAC3B,CACF,CAEA,SAAU2S,EAA0Bf,GAClC,UACQsB,aAAK,IAAMhT,IAAYuP,qBAAqBmC,EAAOxF,QAAQtE,gBAAiB8J,EAAOxF,QAAQoB,gBAAiBoE,EAAOxF,QAAQsD,eAEnI,CAAE,MAAO3P,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAUuS,IACR,IACE,MAAMhS,QAAsC2S,aAAK,IAAMhT,IAAYkP,wBAC7DtD,YAAIjM,IAAWoN,kBAAkB1M,EAAIH,MAC7C,CAAE,MAAOL,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAUwS,EAAwBZ,GAChC,IACE,MACMyB,EAAsC,CAC1C5F,kBAF8ByF,aAAK,IAAMtL,YAAoBgK,EAAOxF,QAAQ3Q,QAASmW,EAAOxF,QAAQ1H,OAAQkN,EAAOxF,QAAQtE,mBAG3HA,gBAAiB8J,EAAOxF,QAAQtE,uBAE5BgE,YAAIjM,IAAWkO,4BAA4BsF,GACnD,CAAE,MAAOtT,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAUyS,EAAsBb,GAC9B,UACQ9F,YAAIjM,IAAWkO,4BAA4B,MACnD,CAAE,MAAOhO,GACPZ,IAAMpB,MAAMgC,EAAIC,QAClB,CACF,CAEA,SAAU8S,EAAoBlB,GAC5B,IACE,MAAMrR,QAA2B2S,aAAK,IAAMhT,IAAYyP,kBAAkBiC,EAAOxF,QAAQyC,YAUzFrW,QAAQiE,KAAK,2BAAD/D,OAA4B6H,EAAG,KAAA7H,OAAI6H,EAAI6S,OAAM,KAAA1a,OAAI6H,EAAIH,OAC9C,MAAfG,EAAI6S,QACN5a,QAAQuF,MAAM,6CAEV+N,YAAIjM,IAAWiP,yBAAyBvO,EAAIH,OAClDwR,EAAOxF,QAAQuC,QAAQpK,QAAQ,oBACjC,CAAE,MAAOxE,GACPvH,QAAQuF,MAAM,iCAADrF,OAAkCqH,IAC/CZ,IAAMpB,MAAMgC,EAAIK,KAAKJ,QAAO,GAAAtH,OAAMqH,EAAIK,KAAKJ,SAAO,SAAAtH,OAAcqH,EAAIqT,QACtE,CACF,CC3Je,SAAUjB,UACjB/U,YAAI,CAACkW,YAAKC,IAClB,CCEA,MAAMC,EAAiBC,cAUVC,EARO,WAA+B,IAA9BzC,EAAYnN,UAAAjH,OAAA,QAAAH,IAAAoH,UAAA,GAAAA,UAAA,GAAGiN,EAClC,MAAM2C,EAAQC,sBAAY1B,EAAahB,EAAc2C,8BAAoBC,0BAAgBL,KAIzF,OAFAA,EAAeM,IAAIC,GAEZL,CACT,CAEqBM,G,+DCmCd,MAAMC,EAAiB/Z,wBAAwB,CAAC,GAKhD,SAASga,EAAsB9Z,GAAuD,IAAtD,SAAEC,GAAiDD,EACxF,MAAO+Z,EAASC,GAAc5Z,oBAAS,IAChCwL,EAAQqO,GAAa7Z,sBACrB8Z,EAAWC,GAAgB/Z,mBAASuK,gBAErC,OAAEzK,EAAM,QAAEK,EAAO,SAAEgB,EAAQ,SAAEK,EAAQ,iBAAEH,GAAqB6H,cAI5D8Q,EACHC,GACDxX,MAAO/D,EAAiBqE,EAAiBmX,KACvC,GAAsB,qBAAXpa,EACT,MAAM,IAAI3B,MAAM,oCAElB,GAAuB,qBAAZgC,EACT,MAAM,IAAIhC,MAAM,4BAElB,IACEyb,GAAW,GACX,MAAMpO,QAAeyO,EAAWvb,EAASqE,EAASmX,GAElD,OADAL,EAAUrO,GACHA,CACT,CAAE,MAAOjG,GAAW,IAAD4U,EACjBnc,QAAQuF,MAAM,uBAAwBgC,GACtC,IAAI6U,EAAc,CAChBrX,UACAsX,OAAO,EACP7O,OAAoB,QAAd2O,EAAK,OAAH5U,QAAG,IAAHA,OAAG,EAAHA,EAAKC,eAAO,IAAA2U,IAAI5U,GAG1B,OADAsU,EAAUO,GACHA,CAET,CAAC,QACCR,GAAW,EACb,CACA,OAAO,IAAI,EAGTU,EAAgCA,CAAC9U,EAAiBS,EAAmBlD,IACzEoH,QAAMoQ,cAAc/U,EAASS,GAAWuU,gBAAkBzX,EAAQyX,cAsC9DC,EAAc,CAClBC,oBAAqBV,GAA6BvX,MAAO/D,EAAiBqE,EAAiBmX,KACzFlc,QAAQiE,KAAK,wCAAD/D,OAAyCQ,EAAO,cAAAR,OAAa6E,IACzE,MAAM4X,EAAkB,GAAAzc,OAAMQ,EAAO,KAAAR,OAAI6E,GACnC9B,EAAUE,EAASyZ,MAAM3Z,GAAoBA,IAAY0Z,IAC/D,QAAgBzY,IAAZjB,EAAuB,MAAM,IAAI9C,MAAM,eAADD,OAAgByc,EAAkB,eAC5E,MAAMvX,EAAUqL,IAAUT,KAAKxM,EAASP,GAAS,GAAGmC,SAAW,KAE/D,IAAIyX,EAAepM,IAAUT,KAAKkM,EAAIxM,UACtC,MAAMoN,EAAerM,IAAUT,KAAKkM,EAAIrM,UACxC,IAAIkN,EAAeF,EAAaG,IAAIF,GACpC,GAAI1X,EAAQ6X,GAAGF,GAEb,OADA/c,QAAQ8H,KAAK,qDACN,CACLQ,OAAQhJ,IAAuB4d,qBAC/BnY,UACAsX,OAAO,EACP7O,OAAQ,oDACRmN,UAAWuB,EAAIjM,GACfrF,MAAOsR,EAAItR,OAIf,IAAIuS,EADoB1M,IAAUT,KAAKkM,EAAItR,OACDwS,IAAIL,GAE9C,GADA/c,QAAQiE,KAAK,sBAAD/D,OAAuBkF,EAAO,gBAAAlF,OAAe2c,EAAY,eAAA3c,OAAc4c,EAAY,wBAAA5c,OAAuBid,IAClH/X,EAAQ6X,GAAGE,GAEb,OADAnd,QAAQ8H,KAAK,sCACN,CACLQ,OAAQhJ,IAAuB4d,qBAC/BnY,UACAsX,OAAO,EACP7O,OAAQ,qCACRmN,UAAWuB,EAAIjM,GACfrF,MAAOsR,EAAItR,OAGf5K,QAAQiE,KAAK,wBACb,MAAMuJ,QAAe1L,EAAQsG,QAAgB,CAC3CC,MAAOlG,EAASkG,MAChB3H,UACA0H,QAAS,CACPE,OAAQhJ,IAAuB4d,qBAC/BhV,OAAQ,CAACgU,MAIb,OADAlc,QAAQiE,KAAK,gCAAD/D,OAAiCsN,IACtC,CACLlF,OAAQhJ,IAAuB4d,qBAC/BnY,UACAsX,OAAO,EACP7O,SACAmN,UAAWuB,EAAIjM,GACfrF,MAAOsR,EAAItR,MACZ,IAEHyS,oBAAqBrB,GAA6BvX,MAAO/D,EAAiBqE,EAAiBuY,KACzF,MAAMX,EAAkB,GAAAzc,OAAMQ,EAAO,KAAAR,OAAI6E,GAEzC,QAAgBb,IADAf,EAASyZ,MAAM3Z,GAAoBA,IAAY0Z,IACpC,MAAM,IAAIxc,MAAM,eAADD,OAAgByc,EAAkB,eAE5E3c,QAAQiE,KAAK,uCAAD/D,OAAwCod,EAAGtN,OAEvD,MAAMuN,QAAyBzb,EAAQsG,QAAQ,CAC7CC,MAAOlG,EAASkG,MAChB3H,UACA0H,QAAS,CACPE,OAAQhJ,IAAuBke,qBAC/BtV,OAAQ,CAACoV,MAGPjB,EAAQoB,cAAeC,iBAAiBH,GAAiBI,kBAC/D3d,QAAQiE,KAAK,gCAAD/D,OAAiCqd,EAAQ,YAAArd,OAAWmc,IAEhE,IAAIuB,EAAY,CACdtV,OAAQhJ,IAAuBke,qBAC/BzY,QAASA,EACTsX,MAAOA,EACP7O,OAAQ+P,EACR5C,UAAW2C,EAAGrN,GACdrF,MAAO0S,EAAG1S,OAGZ,OADAiR,EAAUrO,GACHoQ,CAAS,IAElBC,wBAAyB7B,GACvBvX,MAAO/D,EAAiBqE,KAGtB,MAAMyC,EAAO,8BAAAtH,OAAiC4d,KAAKC,OAM7C7V,EAAS,CAHAC,IAAmBX,GAAS,GAGnBzC,GAGlBkD,QAAkBnG,EAAQsG,QAAgB,CAC9CC,MAAOlG,EAASkG,MAChB3H,UACA0H,QAAS,CACPE,OAAQhJ,IAAuBiJ,cAC/BL,aAKGrI,EAAWiF,GAAapE,EAAQC,MAAM,KAI7C,GAA+B,qBAFP2Q,IAAUzR,GAAWiF,GAG3C,MAAM,IAAI3E,MAAM,mCAADD,OAAoCQ,IAGrD,MAAM2b,EAAQC,EAA8B9U,EAASS,EAAWlD,GAGhE,MAAO,CACLuD,OAAQhJ,IAAuBiJ,cAC/BxD,UACAsX,QACA7O,OAAQvF,EACT,IAGL+V,YAAahC,GAA6BvX,MAAO/D,EAAiBqE,KAEhE,MAAMyC,EAAO,8BAAAtH,OAAiC4d,KAAKC,OAI7C7V,EAAS,CAACnD,EAFDoD,IAAmBX,GAAS,IAKrCS,QAA0BnG,EAAQsG,QAAQ,CAC9CC,MAAOlG,EAASkG,MAChB3H,UACA0H,QAAS,CACPE,OAAQhJ,IAAuB2e,SAC/B/V,aAKGrI,EAAWiF,GAAapE,EAAQC,MAAM,KAQvC0b,EAAQC,EAA8B9U,EAASS,EAAWlD,GAGhE,MAAO,CACLuD,OAAQhJ,IAAuB2e,SAAW,cAC1ClZ,UACAsX,QACA7O,OAAQvF,EACT,KA2NL,OACE+C,cAACyQ,EAAexQ,SAAQ,CACtBL,MAAO,CACLsT,KAnaOzZ,UACX,GAAsB,qBAAX3C,EACT,MAAM,IAAI3B,MAAM,oCAElB,GAAuB,qBAAZgC,EACT,MAAM,IAAIhC,MAAM,4BAGlB,IACEyb,GAAW,GAEX,IAAIS,GAAQ,EAEZ,UACQva,EAAOoc,KAAK,CAAE7V,MAAOlG,EAAQkG,QACnCgU,GAAQ,CACV,CAAE,MAAO/W,GACP+W,GAAQ,CACV,CAGAR,EAAU,CACRvT,OAAQ,OACR+T,QACA7O,OAAQ6O,EAAQ,iBAAmB,eAEvC,CAAE,MAAO/W,GACPtF,QAAQuF,MAAMD,GACduW,EAAU,KACZ,CAAC,QACCD,GAAW,EACb,GAqYIa,cACAmB,UAAWpQ,EACX2Q,oBAAqBxC,EACrBG,YACAC,gBACAla,SAEDA,GAGP,CClhBe,WAA0B,iCCA1B,OAA0B,0CCA1B,OAA0B,0CCA1B,OAA0B,0C,4CCMzC,MAAMuc,GAAY,CACdC,GAAI,CACAC,Q,QAEJC,GAAI,CACAD,Q,SAIRE,KACK5L,IAAI6L,MACJ7L,IAAI8L,MACJpU,KAAK,CACF8T,aACAvT,OAAO,EACP8T,YAAa,KACbC,GAAI,CAAC,aAIEJ,GAAO,ECVtB,MAAMK,GAAOC,IAAMC,MAAK,IACpB,oDAAkBpU,MAAMqU,IAAM,CAC1BC,QAASD,EAAOH,WAOxBK,IAASC,OACPnU,cAACC,IAAQ,CAACiQ,MAAOA,EAAMrZ,SACrBmJ,cAACrJ,IAAqB,CAAAE,SACpBmJ,cAAC0Q,EAAsB,CAAA7Z,SACnBmJ,cAACoU,WAAQ,CAACC,SAAUjN,KAAQvQ,SAE5BwQ,eAACiN,IAAM,CAAAzd,SAAA,CACHwQ,eAACkN,IAAM,CAAA1d,SAAA,CAEHmJ,cAACwU,IAAK,CAACC,KAAM,SAAUC,UC5BhBC,IAKjBtN,eAAA,OAAKC,UAAU,4CAA2CzQ,SAAA,CAEtDwQ,eAAA,OAAKC,UAAU,mFAAkFzQ,SAAA,CAC7FwQ,eAAA,OAAKC,UAAU,oCAAmCzQ,SAAA,CAC9CmJ,cAAA,OAAKsH,UAAU,YAAYsN,IAAKC,GAAUC,IAAI,KAC9C9U,cAAA,OAAKsH,UAAU,2BAA0BzQ,SACrCmJ,cAAA,MAAIsH,UAAU,yBAAwBzQ,SAAC,wBAK/CmJ,cAAA,OAAKsH,UAAU,iCAAgCzQ,SAC/CwQ,eAAA,OAAKC,UAAU,oBAAmBzQ,SAAA,CAC9BmJ,cAAA,KAAGsH,UAAU,UAASzQ,SAAC,UACvBmJ,cAAA,KAAGsH,UAAU,oBAAmBzQ,SAAC,iCAQzCwQ,eAAA,OAAKC,UAAU,yDAAwDzQ,SAAA,CACnEmJ,cAAA,OAAK4G,GAAG,UAAUU,UAAU,4EAA2EzQ,SACnGmJ,cAAA,OAAKsH,UAAU,YAAYsN,IAAKC,GAAUC,IAAI,OAElD9U,cAAA,MAAIsH,UAAU,kDAAiDzQ,SAAC,4DAEhEmJ,cAAA,OAAKsH,UAAU,iBAAiBsN,IAAKG,GAAQD,IAAI,KACjD9U,cAAA,KAAGsH,UAAU,4BAA2BzQ,SAAC,4BACzCmJ,cAAA,KAAGsH,UAAU,4CAA2CzQ,SAAC,yGAEzDmJ,cAAA,OAAKsH,UAAU,kBAAkBsN,IAAKI,GAAQF,IAAI,KAClD9U,cAAA,KAAGsH,UAAU,4BAA2BzQ,SAAC,gBACzCmJ,cAAA,KAAGsH,UAAU,4CAA2CzQ,SAAC,uEAEzDmJ,cAAA,OAAKsH,UAAU,kBAAkBsN,IAAKK,GAAQH,IAAI,KAClD9U,cAAA,KAAGsH,UAAU,4BAA2BzQ,SAAC,qBACzCmJ,cAAA,KAAGsH,UAAU,4CAA2CzQ,SAAC,gGDbvDmJ,cAACwU,IAAK,CAACC,KAAM,IAAKC,UAAWb,QAEnC7T,cAACkV,IAAc,CACbC,eAAe,yGACfC,cAAeA,IAAM,wCACrBC,WAAW,EACXC,MAAM,EACNC,SAAS,gBACTC,iBAAiB,EACjBC,cAAc,eAQ1BC,SAASC,eAAe,SAG1BvJ,G,kCExDA,0GAGA,MAAMwJ,EAAMC,EAAQ,KAAqB5B,QACnC6B,EAAgBD,EAAQ,KAAqBC,cAE7CC,EAAW,IAAIC,YAAiBC,gBAAgB/T,KACzCiD,EAAO,IAAI+Q,IAAKhU,KAChBqN,EAAM,IAAIqG,EAAI,CAAEG,WAAUI,WAAYL,EAAc,M","file":"static/js/main.db731f1c.chunk.js","sourcesContent":["import { EUserActionTypes } from '../enums';\n\nexport const userActionTypes = {\n  ...EUserActionTypes,\n};\n","import {isTestnetMode} from \"../config/appconfig\";\n\nexport const DEFAULT_MAIN_CHAINS = [\n  \"eip155:1\",// ethereum mainnet\n  // \"eip155:10\",\n  // \"eip155:100\",\n  //\"eip155:137\",// polygon mainnet infura inodes requires that the account enters a payment method\n  // \"eip155:42161\",\n  // \"eip155:42220\",\n  // \"cosmos:cosmoshub-4\",\n  // \"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ\",\n];\n\nexport const DEFAULT_TEST_CHAINS = [\n  // testnets\n  \"eip155:5\",//ethereum gorli\n  // \"eip155:42\",//ethereum kovan\n  // \"eip155:69\",\n  // \"eip155:80001\",//polygon mumbai\n  // \"eip155:421611\",\n  // \"eip155:44787\",\n  // \"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K\",\n];\n\nexport const DEFAULT_CHAINS = isTestnetMode() ? DEFAULT_TEST_CHAINS: DEFAULT_MAIN_CHAINS;\n\n// Wallet connect project ID\nexport const DEFAULT_PROJECT_ID = 'f17194a7efd15ee24623a532ccff7c77';\nexport const DEFAULT_RELAY_URL = 'wss://relay.walletconnect.com';\n\nexport const DEFAULT_LOGGER = 'info';\n\nconst APP_URL = isTestnetMode() ? 'https://test.jxndao.com/storefront': 'https://jxndao.com/storefront'\nconst MERCHANT_APP_URL = isTestnetMode() ? 'https://test.jxndao.com/storefront/merchant': 'https://jxndao.com/storefront/merchant'\n\n// TODO Change app data\nexport const DEFAULT_APP_METADATA = {\n  name: 'Storefront Pay',\n  description: 'StoreFront Pay DApp',\n  url: APP_URL,\n  icons: ['https://jxndao.com/logo192.png'],\n};\n\nexport const DEFAULT_MERCHANT_APP_METADATA = {\n  name: 'Storefront Merchant',\n  description: 'StoreFront Merchant Dashboard',\n  url: MERCHANT_APP_URL,\n  icons: ['https://jxndao.com/logo192.png'],\n};\n\n/**\n * EIP155\n */\nexport enum DEFAULT_EIP155_METHODS {\n  ETH_SEND_TRANSACTION = \"eth_sendTransaction\",\n  ETH_SIGN_TRANSACTION = \"eth_signTransaction\",\n  ETH_SIGN = \"eth_sign\",\n  PERSONAL_SIGN = \"personal_sign\",\n}\n\nexport enum DEFAULT_EIP_155_EVENTS {\n  ETH_CHAIN_CHANGED = \"chainChanged\",\n  ETH_ACCOUNTS_CHANGED = \"accountsChanged\",\n}\n\n/**\n * COSMOS\n */\nexport enum DEFAULT_COSMOS_METHODS {\n  COSMOS_SIGN_DIRECT = \"cosmos_signDirect\",\n  COSMOS_SIGN_AMINO = \"cosmos_signAmino\",\n}\n\nexport enum DEFAULT_COSMOS_EVENTS {}\n\n/**\n * SOLANA\n */\nexport enum DEFAULT_SOLANA_METHODS {\n  SOL_SIGN_TRANSACTION = \"solana_signTransaction\",\n  SOL_SIGN_MESSAGE = \"solana_signMessage\",\n}\n\nexport enum DEFAULT_SOLANA_EVENTS {}\n","import { ProposalTypes } from \"@walletconnect/types\";\nimport {\n    DEFAULT_COSMOS_EVENTS,\n    DEFAULT_COSMOS_METHODS,\n    DEFAULT_EIP155_METHODS,\n    DEFAULT_EIP_155_EVENTS,\n    DEFAULT_SOLANA_EVENTS,\n    DEFAULT_SOLANA_METHODS,\n} from \"../consts\";\n\nexport const getNamespacesFromChains = (chains: string[]) => {\n    const supportedNamespaces: string[] = [];\n    chains.forEach(chainId => {\n        const [namespace] = chainId.split(\":\");\n        if (!supportedNamespaces.includes(namespace)) {\n            supportedNamespaces.push(namespace);\n        }\n    });\n\n    return supportedNamespaces;\n};\n\nexport const getSupportedMethodsByNamespace = (namespace: string) => {\n    switch (namespace) {\n        case \"eip155\":{\n            let values = Object.values(DEFAULT_EIP155_METHODS);\n            console.log(`selected methods ${values} for namespace: ${namespace}` );\n            return values;\n        }\n        case \"cosmos\":\n            return Object.values(DEFAULT_COSMOS_METHODS);\n        case \"solana\":\n            return Object.values(DEFAULT_SOLANA_METHODS);\n        default:\n            throw new Error(`No default methods for namespace: ${namespace}`);\n    }\n};\n\nexport const getSupportedEventsByNamespace = (namespace: string) => {\n    switch (namespace) {\n        case \"eip155\":\n            return Object.values(DEFAULT_EIP_155_EVENTS);\n        case \"cosmos\":\n            return Object.values(DEFAULT_COSMOS_EVENTS);\n        case \"solana\":\n            return Object.values(DEFAULT_SOLANA_EVENTS);\n        default:\n            throw new Error(`No default events for namespace: ${namespace}`);\n    }\n};\n\nexport const getRequiredNamespaces = (chains: string[]): ProposalTypes.RequiredNamespaces => {\n    const selectedNamespaces = getNamespacesFromChains(chains);\n    console.log(\"selected namespaces:\", selectedNamespaces);\n\n    // for (let item in selectedNamespaces){\n    //     console.log(`\"supported methods for: ${item} ${getSupportedMethodsByNamespace(item)}`);\n    // }\n\n    return Object.fromEntries(\n        selectedNamespaces.map(namespace => [\n            namespace,\n            {\n                methods: getSupportedMethodsByNamespace(namespace),\n                chains: chains.filter(chain => chain.startsWith(namespace)),\n                events: getSupportedEventsByNamespace(namespace) as any[],\n            },\n        ]),\n    );\n};\n","import Client from '@walletconnect/sign-client';\nimport {PairingTypes, SessionTypes} from '@walletconnect/types';\nimport {createContext, ReactNode, useCallback, useContext, useEffect, useMemo, useState} from 'react';\nimport {PublicKey} from '@solana/web3.js';\nimport moment from 'moment';\nimport * as encoding from '@walletconnect/encoding';\n\nimport {\n  DEFAULT_APP_METADATA, DEFAULT_CHAINS,\n  DEFAULT_EIP155_METHODS,\n  DEFAULT_PROJECT_ID,\n  DEFAULT_RELAY_URL,\n} from '../consts';\nimport {getAppMetadata, getSdkError} from \"@walletconnect/utils\";\nimport {getPublicKeysFromAccounts} from '../helpers/solana';\nimport {useDispatch} from 'react-redux';\nimport {userAction} from '../store/actions';\nimport {sleep} from '../utils';\nimport {toast} from 'react-toastify';\nimport {AccountBalances} from \"../helpers\";\nimport {getRequiredNamespaces} from \"../helpers/namespaces\";\nimport {currentRpcApi} from \"../helpers/tx\";\nimport {UserService} from \"../services\";\nimport axios from \"../services/axios\";\nimport {useLocation} from \"react-use\";\n\nconst loadingTimeout = 5; // seconds\nconst SIGNATURE_PREFIX = 'NDJ_SIGNATURE_V2_';\nconst NDJ_ADDRESS = 'NDJ_ADDRESS_V2';\n\n/**\n * Types\n */\ninterface IContext {\n  initialized: boolean;\n  qrCodeUri: string | undefined;\n  client: Client | undefined;\n  session: SessionTypes.Struct | undefined;\n  connect: (pairing?: { topic: string }) => Promise<void>;\n  disconnect: () => Promise<void>;\n  refreshBalances: (accounts: string[]) => Promise<void>;\n  switchAccount: (account: string) => Promise<void>;\n  isInitializing: boolean;\n  chains: string[];\n  pairings: PairingTypes.Struct[];\n  isLoading: boolean;\n  account: string | undefined;\n  accounts: string[];\n  solanaPublicKeys?: Record<string, PublicKey>;\n  balances: AccountBalances;\n  setChains: any;\n  merchantLogin: MerchantLoginStatus;\n}\n\nexport interface MerchantLoginStatus {\n  isMerchantUser: boolean;\n  merchantExists: boolean;\n}\n\n/**\n * Context\n */\nexport const ClientContext = createContext<IContext>({} as IContext);\n\n/**\n * Provider\n */\nexport function WalletConnectProvider({ children }: { children: ReactNode | ReactNode[] }) {\n  const [client, setClient] = useState<Client>();\n  const [pairings, setPairings] = useState<PairingTypes.Struct[]>([]);\n  const [session, setSession] = useState<SessionTypes.Struct>();\n  const dispatch = useDispatch();\n\n  const [qrCodeUri, setQRCodeUri] = useState<string>();\n  const [initialized, setInitialized] = useState(false);\n  const [isFetchingBalances, setIsFetchingBalances] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [account, setAccount] = useState<string>();\n  const [accounts, setAccounts] = useState<string[]>([]);\n  const [solanaPublicKeys, setSolanaPublicKeys] = useState<Record<string, PublicKey>>();\n  const [chains, setChains] = useState<string[]>(DEFAULT_CHAINS);\n\n  const [balances, setBalances] = useState<AccountBalances>({});\n\n  const [merchantLogin, setMerchantLogin] = useState<MerchantLoginStatus>({isMerchantUser: false, merchantExists: false});\n\n  let pathname = useLocation().pathname;\n\n  const reset = () => {\n    console.info(`resetting balances`);\n    setPairings([]);\n    setQRCodeUri(undefined);\n    setBalances({});\n    setSession(undefined);\n    setAccount(undefined);\n    setAccounts([]);\n    setChains([]);\n\n    for (var i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.includes(SIGNATURE_PREFIX)) {\n        localStorage.removeItem(key);\n      }\n    }\n    localStorage.removeItem(NDJ_ADDRESS);\n  };\n\n  const getAccountBalances = async (_accounts: string[]) => {\n    console.info(`getting account balances`)\n    setIsFetchingBalances(true);\n    try {\n\n      const arr = await Promise.all(\n          _accounts.map(async account => {\n            const [namespace, reference, address] = account.split(\":\");\n            const chainId = `${namespace}:${reference}`;\n            const assets = await currentRpcApi.getAccountBalance(address, chainId);\n            console.info(`account balance for chainId:${chainId} address:${address} \\n\n              --> balance = ${assets.symbol} ${assets.balance}`);\n            return { account, assets: [assets] };\n          }),\n      );\n\n      const balances: AccountBalances = {};\n      arr.forEach(({ account, assets }) => {\n        balances[account] = assets;\n      });\n      setBalances(balances);\n    } catch (e) {\n      console.error(`caught error while refreshing balances: ${e}`);\n    } finally {\n      setIsFetchingBalances(false);\n    }\n  };\n\n  const onSessionConnected = useCallback(async (_session: SessionTypes.Struct) => {\n    const allNamespaceAccounts = Object.values(_session.namespaces)\n        .map(namespace => namespace.accounts)\n        .flat();\n    const allNamespaceChains = Object.keys(_session.namespaces);\n    setSession(_session);\n    setChains(allNamespaceChains);\n    setAccounts(allNamespaceAccounts);\n    setSolanaPublicKeys(getPublicKeysFromAccounts(allNamespaceAccounts));\n    await getAccountBalances(allNamespaceAccounts);\n  }, []);\n\n\n  useEffect(() => {\n    if (!pathname) {\n      return;\n    }\n    if (pathname.startsWith('/storefront/merchant')) {\n      merchantLogin.isMerchantUser = true\n    } else {\n      merchantLogin.isMerchantUser = false\n    }\n    setMerchantLogin(merchantLogin);\n\n  }, [pathname]);\n\n  function loginWithAccount(account: string, merchantLogin: MerchantLoginStatus) {\n    if (!merchantLogin.isMerchantUser) {\n      login(account);\n    } else {\n      loginWithSignedNonce(account);\n    }\n  }\n\n  useEffect(() => {\n    if (!accounts.length) {\n      return;\n    }\n\n    const account = localStorage.getItem(NDJ_ADDRESS);\n    if (!accounts.length) {\n      return;\n    }\n    const availableAccounts = accounts.filter(a => !a.startsWith('solana'));\n\n    if (account && availableAccounts.includes(account)) {\n      loginWithAccount(account, merchantLogin);\n    } else if (availableAccounts[0]) {\n      loginWithAccount(availableAccounts[0], merchantLogin);\n    } else {\n      toast.error('No available accounts');\n      disconnect();\n    }\n  }, [accounts, merchantLogin]);\n\n  async function signNonce(account: string, nonce: string) {\n    const [namespace, reference, address] = account.split(':');\n    const message = nonce;\n    const hexMsg = encoding.utf8ToHex(message, true);\n\n    // personal_sign params\n    const params = [hexMsg, address];\n    // send message\n    const signature = await client?.request<string>({\n      topic: session!.topic,\n      chainId: `${namespace}:${reference}`,\n      request: {\n        method: DEFAULT_EIP155_METHODS.PERSONAL_SIGN,\n        params,\n      },\n    });\n\n    if (signature) {\n      localStorage.setItem(`${SIGNATURE_PREFIX}_${account}`, signature);\n    }\n    //TODO else\n    return signature;\n  }\n\n  const login = useCallback(\n    async (account: string) => {\n      try {\n        setIsLoading(true);\n        const startTime = moment();\n\n        const [namespace, reference, address] = account.split(':');\n\n        const duration = moment.duration(moment().diff(startTime)).asSeconds();\n        const waitTime = loadingTimeout - duration;\n\n        if (waitTime > 0) {\n          await sleep(waitTime * 1000);\n        }\n\n        setAccount(account);\n        localStorage.setItem(NDJ_ADDRESS, account);\n\n        dispatch(userAction.loginSuccess({ address: address, namespace: namespace, reference: reference}));\n\n      } catch (err: any) {\n        localStorage.removeItem(`${SIGNATURE_PREFIX}_${account}`);\n        toast.error(err.message);\n        console.error(`login exception: ${err} ${err?.message}. Disconnecting...`)\n        disconnect();\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [client, session]\n  );\n\n  //TODO this should be used when we access the merchant app, as opposed to one step login when using the purchase app with no signature\n  const loginWithSignedNonce = useCallback(\n      async (account: string) => {\n        try {\n          setIsLoading(true);\n          const startTime = moment();\n\n          const [namespace, reference, address] = account.split(':');\n\n          try {\n            const loginRes = await UserService.loginApi(address);\n            const memberNonce = loginRes.data.nonce;\n            if (!memberNonce) {\n              console.warn(\"not a member\")\n              merchantLogin.merchantExists = false\n            } else {\n              console.warn(\"merchant does exist a member\")\n              merchantLogin.merchantExists = true\n            }\n            setMerchantLogin(merchantLogin)\n          } catch (e) {\n            console.log(e)\n          }\n\n\n          const res = await UserService.nonceApi(address);\n          let nonce = res.data.nonce;\n\n          if (!nonce) {\n            console.warn(`registration nonce is not valid. exit`)\n            throw new Error(res.data.message);\n          }\n\n          let signature: string | null = localStorage.getItem(`${SIGNATURE_PREFIX}_${account}`) as string;\n          if (!signature) {\n            signature = await signNonce(account, nonce) || null;\n          }\n\n          if (signature) {\n            axios.setAuthorizationToken(signature);\n            axios.setNonce(nonce);\n          } else {\n            toast(\"Invalid signature\")\n          }\n\n          const duration = moment.duration(moment().diff(startTime)).asSeconds();\n          const waitTime = loadingTimeout - duration;\n\n          if (waitTime > 0) {\n            await sleep(waitTime * 1000);\n          }\n\n          setAccount(account);\n          localStorage.setItem(NDJ_ADDRESS, account);\n\n          dispatch(userAction.loginSuccess({ address: address, namespace: namespace, reference: reference}));\n          dispatch(userAction.merchantLoginSuccess({address: address}));\n\n\n\n        } catch (err: any) {\n          localStorage.removeItem(`${SIGNATURE_PREFIX}_${account}`);\n          console.error(`loginWithSignedNonce exception: ${err} ${err?.message}`)\n          toast.error(`Error: ${err.message}.`);\n\n          //TODO check if disconnect or not\n          // disconnect().then(() => console.log(`disconnect done.`));\n        } finally {\n          setIsLoading(false);\n        }\n      },\n      [client, session, merchantLogin]\n  );\n\n  const connect = useCallback(\n    async pairing => {\n      try {\n        console.log(\"connecting...\");\n        if (typeof client === 'undefined') {\n          throw new Error('WalletConnect is not initialized');\n        }\n        console.log(\"connect, pairing topic is:\", pairing?.topic);\n        const requiredNamespaces = getRequiredNamespaces(chains);\n        console.log(\"requiredNamespaces config for connect:\", requiredNamespaces);\n\n        let connectParams = {\n          pairingTopic: pairing?.topic,\n          requiredNamespaces,\n        };\n        const { uri, approval } = await client.connect(connectParams);\n\n        // Open QRCode modal if a URI was returned (i.e. we're not connecting an existing pairing).\n        if (uri) {\n          setQRCodeUri(uri);\n        }\n\n        const session = await approval();\n        console.log(\"Established session:\", session);\n        await onSessionConnected(session);\n        // Update known pairings after session is connected.\n        setPairings(client.pairing.getAll({ active: true }));\n      } catch (e: any) {\n        toast.error(`connect error: ${e?.message || \"\"}`);\n      } finally {\n        // close modal in case it was open\n      }\n    },\n    [chains, client, onSessionConnected]\n  );\n\n  const disconnect = useCallback(async () => {\n    try {\n      if (typeof client === 'undefined') {\n        throw new Error('WalletConnect is not initialized');\n      }\n      if (typeof session === 'undefined') {\n        throw new Error('Session is not connected');\n      }\n      await client.disconnect({\n        topic: session.topic,\n        reason: getSdkError(\"USER_DISCONNECTED\"),\n      });\n      // Reset app state after disconnect.\n      reset();\n    } catch (err: any) {\n      console.log(`disconnect error ${err?.message}`)\n      //toast.error(err.message);\n    }\n  }, [client, session]);\n\n  const refreshBalances = useCallback(\n      async (_accounts: string[]) => {\n        try {\n          if (!client) {\n            throw new Error('WalletConnect is not initialized');\n          }\n          if (!session) {\n            throw new Error('Session is not connected');\n          }\n          await getAccountBalances(_accounts);\n        } catch (err: any) {\n          toast.error(`caught error while refreshing balances: ${err.message}`);\n        }\n      },\n      [client, session]\n  );\n\n  const switchAccount = useCallback(\n    async (_account: string) => {\n      try {\n        setAccount(undefined);\n        if (!client) {\n          throw new Error('WalletConnect is not initialized');\n        }\n\n        if (!session) {\n          throw new Error('Session is not connected');\n        }\n        console.log('_account', _account);\n        login(_account);\n      } catch (err: any) {\n        toast.error(err.message);\n      }\n    },\n    [client, session]\n  );\n\n  const _subscribeToEvents = useCallback(\n    async (_client: Client) => {\n      if (typeof _client === 'undefined') {\n        return toast.error('WalletConnect is not initialized');\n      }\n      _client.on(\"session_ping\", args => {\n        console.log(\"EVENT\", \"session_ping\", args);\n      });\n\n      _client.on(\"session_ping\", args => {\n        console.warn(`**** session_ping event. args: ${args}`);\n      });\n\n      _client.on(\"session_event\", args => {\n        console.log(\"EVENT\", \"session_event\", args);\n      });\n\n      _client.on(\"session_update\", ({ topic, params }) => {\n        console.log(\"EVENT\", \"session_update\", { topic, params });\n        const { namespaces } = params;\n        const _session = _client.session.get(topic);\n        const updatedSession = { ..._session, namespaces };\n        onSessionConnected(updatedSession);\n      });\n\n      _client.on(\"session_delete\", () => {\n        console.log(\"EVENT\", \"session_delete\");\n        reset();\n      });\n    },\n    [onSessionConnected]\n  );\n\n\n  const _checkPersistedState = useCallback(\n    async (_client: Client) => {\n      if (typeof _client === 'undefined') {\n        return toast.error('WalletConnect is not initialized');\n      }\n      // populates existing pairings to state\n      setPairings(_client.pairing.values);\n      console.log(\"RESTORED PAIRINGS: \", _client.pairing.values);\n\n\n      if (typeof session !== 'undefined') return;\n      // populates (the last) existing session to state\n      if (_client.session.length) {\n        const lastKeyIndex = _client.session.keys.length - 1;\n        const _session = _client.session.get(_client.session.keys[lastKeyIndex]);\n        console.log(\"RESTORED SESSION:\", _session);\n        await onSessionConnected(_session);\n        return _session;\n      }\n    },\n    [session, onSessionConnected]\n  );\n\n  const createClient = useCallback(async () => {\n    try {\n      setIsInitializing(true);\n\n      const _client = await Client.init({\n        // logger: DEFAULT_LOGGER,\n        relayUrl: DEFAULT_RELAY_URL,\n        projectId: DEFAULT_PROJECT_ID,\n        metadata: getAppMetadata() || DEFAULT_APP_METADATA,\n      });\n      console.log(\"CREATED CLIENT: \", _client);\n      setClient(_client);\n      await _subscribeToEvents(_client);\n      await _checkPersistedState(_client);\n      setInitialized(true);\n    } catch (err) {\n      throw err;\n    } finally {\n      setIsInitializing(false);\n    }\n  }, [_checkPersistedState, _subscribeToEvents]);\n\n  useEffect(() => {\n    if (!client) {\n      try {\n        createClient().then(value => {\n          console.debug(`client created ok: ${value}`)\n        }).catch(reason => {\n          console.error(`client creation failed: reason: ${reason}`)\n        });\n      } catch (e) {\n        console.error(`client creation failed: ${e}`)\n      }\n    }\n  }, [client, createClient]);\n\n  const value = useMemo(\n    () => ({\n      pairings,\n      isInitializing,\n      initialized,\n      qrCodeUri,\n      isLoading,\n      account,\n      accounts,\n      balances,\n      solanaPublicKeys,\n      chains,\n      client,\n      session,\n      connect,\n      disconnect,\n      refreshBalances,\n      setChains,\n      switchAccount,\n      merchantLogin,\n    }),\n    [\n      pairings,\n      isInitializing,\n      isLoading,\n      initialized,\n      qrCodeUri,\n      account,\n      accounts,\n      balances,\n      solanaPublicKeys,\n      chains,\n      client,\n      session,\n      connect,\n      disconnect,\n      refreshBalances,\n      setChains,\n      switchAccount,\n      merchantLogin\n    ]\n  );\n\n  return (\n    <ClientContext.Provider\n      value={{\n        ...value,\n      }}\n    >\n      {children}\n    </ClientContext.Provider>\n  );\n}\n\nexport function useWalletConnectClient() {\n  const context = useContext(ClientContext);\n  if (context === undefined) {\n    toast.error('useWalletConnectClient must be used within a WalletConnectProvider');\n  }\n  return context;\n}\n","import { PublicKey } from \"@solana/web3.js\";\n\nexport function getPublicKeysFromAccounts(accounts: string[]) {\n  return (\n    accounts\n      // Filter out any non-solana accounts.\n      .filter(account => account.startsWith(\"solana:\"))\n      // Create a map of Solana address -> publicKey.\n      .reduce((map: Record<string, PublicKey>, account) => {\n        const address = account.split(\":\").pop();\n        if (!address) {\n          throw new Error(`Could not derive Solana address from CAIP account: ${account}`);\n        }\n        map[address] = new PublicKey(address);\n        return map;\n      }, {})\n  );\n}\n","import {BigNumber, BigNumberish, utils} from 'ethers';\nimport * as encoding from '@walletconnect/encoding';\nimport {TypedDataUtils} from 'eth-sig-util';\nimport * as ethUtil from 'ethereumjs-util';\n\nimport {DEFAULT_CHAINS} from '../consts';\n\nexport function capitalize(string: string): string {\n  return string\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n    .join(' ');\n}\n\nexport function ellipseText(text = '', maxLength = 9999): string {\n  if (text.length <= maxLength) {\n    return text;\n  }\n  const _maxLength = maxLength - 3;\n  let ellipse = false;\n  let currentLength = 0;\n  const result =\n    text\n      .split(' ')\n      .filter(word => {\n        currentLength += word.length;\n        if (ellipse || currentLength >= _maxLength) {\n          ellipse = true;\n          return false;\n        } else {\n          return true;\n        }\n      })\n      .join(' ') + '...';\n  return result;\n}\n\nexport function ellipseAddress(address = '', width = 10): string {\n  return `${address.slice(0, width)}...${address.slice(-width)}`;\n}\n\nexport function getDataString(func: string, arrVals: any[]): string {\n  let val = '';\n  for (let i = 0; i < arrVals.length; i++) {\n    val += encoding.padLeft(arrVals[i], 64);\n  }\n  const data = func + val;\n  return data;\n}\n\nexport function isMobile(): boolean {\n  let mobile = false;\n\n  function hasTouchEvent(): boolean {\n    try {\n      document.createEvent('TouchEvent');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function hasMobileUserAgent(): boolean {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(\n        navigator.userAgent\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n        navigator.userAgent.substr(0, 4)\n      )\n    ) {\n      return true;\n    } else if (hasTouchEvent()) {\n      return true;\n    }\n    return false;\n  }\n\n  mobile = hasMobileUserAgent();\n\n  return mobile;\n}\n\nexport function encodePersonalMessage(msg: string): string {\n  const data = encoding.utf8ToBuffer(msg);\n  const buf = Buffer.concat([Buffer.from('\\u0019Ethereum Signed Message:\\n' + data.length.toString(), 'utf8'), data]);\n  return ethUtil.bufferToHex(buf);\n}\n\nexport function hashPersonalMessage(msg: string): string {\n  const data = encodePersonalMessage(msg);\n  const buf = ethUtil.toBuffer(data);\n  const hash = ethUtil.keccak256(buf);\n  return ethUtil.bufferToHex(hash);\n}\n\nexport function encodeTypedDataMessage(msg: string): string {\n  const data = TypedDataUtils.sanitizeData(JSON.parse(msg));\n  const buf = Buffer.concat([\n    Buffer.from('1901', 'hex'),\n    TypedDataUtils.hashStruct('EIP712Domain', data.domain, data.types),\n    TypedDataUtils.hashStruct(data.primaryType as string, data.message, data.types),\n  ]);\n  return ethUtil.bufferToHex(buf);\n}\n\nexport function hashTypedDataMessage(msg: string): string {\n  const data = encodeTypedDataMessage(msg);\n  const buf = ethUtil.toBuffer(data);\n  const hash = ethUtil.keccak256(buf);\n  return ethUtil.bufferToHex(hash);\n}\n\nexport function recoverAddress(sig: string, hash: string): string {\n  const params = ethUtil.fromRpcSig(sig);\n  const result = ethUtil.ecrecover(ethUtil.toBuffer(hash), params.v, params.r, params.s);\n  const signer = ethUtil.bufferToHex(ethUtil.publicToAddress(result));\n  return signer;\n}\n\nexport function recoverPersonalSignature(sig: string, msg: string): string {\n  const hash = hashPersonalMessage(msg);\n  const signer = recoverAddress(sig, hash);\n  return signer;\n}\n\nexport function recoverTypedMessage(sig: string, msg: string): string {\n  const hash = hashTypedDataMessage(msg);\n  const signer = recoverAddress(sig, hash);\n  return signer;\n}\n\nexport function convertHexToNumber(hex: string) {\n  try {\n    return encoding.hexToNumber(hex);\n  } catch (e) {\n    return 0;\n  }\n}\n\nexport function convertHexToUtf8(hex: string) {\n  try {\n    return encoding.hexToUtf8(hex);\n  } catch (e) {\n    return hex;\n  }\n}\n\nexport const sanitizeDecimals = (value: string, decimals = 18): string => {\n  const [integer, fractional] = value.split('.');\n  const _fractional = fractional ? fractional.substring(0, decimals).replace(/0+$/gi, '') : undefined;\n  return _fractional ? [integer, _fractional].join('.') : integer;\n};\n\nexport const toWad = (amount: string, decimals = 18): BigNumber => {\n  return utils.parseUnits(sanitizeDecimals(amount, decimals), decimals);\n};\n\nexport const fromWad = (wad: BigNumberish, decimals = 18): string => {\n  return sanitizeDecimals(utils.formatUnits(wad, decimals), decimals);\n};\n\nexport const LOCALSTORAGE_KEY_TESTNET = 'TESTNET';\nexport const INITIAL_STATE_TESTNET_DEFAULT = true;\n\nexport function setLocaleStorageTestnetFlag(value: boolean): void {\n  window.localStorage.setItem(LOCALSTORAGE_KEY_TESTNET, `${value}`);\n}\n\nexport function getLocalStorageTestnetFlag(): boolean {\n  let value = INITIAL_STATE_TESTNET_DEFAULT;\n  const persisted = window.localStorage.getItem(LOCALSTORAGE_KEY_TESTNET);\n  if (!persisted) {\n    console.debug(`saving TESTNET ${value} flag to local storage`)\n    setLocaleStorageTestnetFlag(value);\n  } else {\n    value = persisted === 'true';\n  }\n\n  return value;\n}\n\nexport const getAllChainNamespaces = () => {\n  const namespaces: string[] = [];\n  DEFAULT_CHAINS.forEach(chainId => {\n    const [namespace] = chainId.split(':');\n    if (!namespaces.includes(namespace)) {\n      namespaces.push(namespace);\n    }\n  });\n  return namespaces;\n};\n","import axios, { AxiosInstance } from \"axios\";\nimport { AssetData, GasPrices, ParsedTx } from \"../helpers/types\";\n\n// FIXME this should be done via the rpc provider to avoid using this hard-coded nodes, that result in 429 errors\n// https://github.com/pedrouid/ethereum-api\n// It doesn't support Ethereum KOVAN\nconst ethereumApi: AxiosInstance = axios.create({\n    baseURL: \"https://ethereum-api.xyz\",\n    timeout: 30000, // 30 secs\n    headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n    },\n});\n\n// async function apiGetAccountAssets(address: string, chainId: string): Promise<AssetData[]> {\n//     const ethChainId = chainId.split(\":\")[1];\n//     const response = await ethereumApi.get(\n//         `/account-assets?address=${address}&chainId=${ethChainId}`,\n//     );\n//     const { result } = response.data;\n//     return result;\n// }\n\nexport async function apiGetAccountBalance(address: string, chainId: string): Promise<AssetData> {\n    const ethChainId = chainId.split(\":\")[1];\n    const response = await ethereumApi.get(\n        `/account-balance?address=${address}&chainId=${ethChainId}`,\n    );\n    const { result } = response.data;\n    return result;\n}\n\nexport async function apiGetAccountTransactions(\n    address: string,\n    chainId: string,\n): Promise<ParsedTx[]> {\n    const ethChainId = chainId.split(\":\")[1];\n    const response = await ethereumApi.get(\n        `/account-transactions?address=${address}&chainId=${ethChainId}`,\n    );\n    const { result } = response.data;\n    return result;\n}\n\nexport const apiGetAccountNonce = async (address: string, chainId: string): Promise<number> => {\n    const ethChainId = chainId.split(\":\")[1];\n    const response = await ethereumApi.get(`/account-nonce?address=${address}&chainId=${ethChainId}`);\n    const { result } = response.data;\n    return result;\n};\n\n//FIXME no chain id, only for ethereum ??\nexport const apiGetGasPrices = async (chainId: string): Promise<GasPrices> => {\n    const ethChainId = chainId.split(\":\")[1];\n    console.info(`apiGetGasPrices for chainId: ${chainId} ethChainId: ${ethChainId}`);\n    const response = await ethereumApi.get(`/gas-prices?chainId=${ethChainId}`);\n    const { result } = response.data;\n    return result;\n};\n","import axios, {AxiosInstance} from \"axios\";\nimport {AssetData, TxDetails} from \"../helpers/types\";\nimport {ethereumRpcUrl, polygonRpcUrl} from \"../config/appconfig\";\n\nconst ethInstance: AxiosInstance = axios.create({\n    baseURL: ethereumRpcUrl,\n    timeout: 30000, // 30 secs\n    headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n    },\n});\n\nconst polygonInstance: AxiosInstance = axios.create({\n    baseURL: polygonRpcUrl,\n    timeout: 30000, // 30 secs\n    headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n    },\n});\n\nexport async function infuraGetAccountBalance(address: string, chainId: string): Promise<AssetData> {\n    const data = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"eth_getBalance\",\n        \"params\": [address, \"latest\"],\n        \"id\": 1\n    };\n    if (chainId.includes(\"80001\")) {\n        return infuraGetPolygonAccountBalance(data);\n    }\n    return infuraGetEthAccountBalance(data);\n}\n\nasync function infuraGetEthAccountBalance(data: any): Promise<AssetData> {\n    const response = await ethInstance.post(\n        \"\",\n        data\n    );\n    const { result } = response.data;\n    const assetData = {\n        symbol: \"ETH\",\n        name: \"Ether\",\n        decimals: \"18\",\n        contractAddress: \"\",\n        balance: result\n    }\n    return assetData;\n}\n\nasync function infuraGetPolygonAccountBalance(data: any): Promise<AssetData> {\n    const response = await polygonInstance.post(\n        \"\",\n        data\n    );\n    const { result } = response.data;\n    const assetData = {\n        symbol: \"MATIC\",\n        name: \"Matic\",\n        decimals: \"18\",\n        contractAddress: \"\",\n        balance: result\n    }\n    return assetData;\n}\n\n/**\n * https://docs.infura.io/infura/networks/ethereum/json-rpc-methods/parity_nextnonce\n * @param address\n * @param chainId\n */\nexport const infuraGetAccountTransactions = async (address: string, chainId: string): Promise<number> => {\n    const data = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"eth_getTransactionByHash\",\n        \"params\": [address],\n        \"id\": 1\n    };\n    const response = await ethInstance.post(\n        \"\",\n        data\n    );\n    const { result } = response.data;\n    console.info(`got nonce: ${result}`)\n    return result;\n};\n\nexport const infuraGetTransactionByHash = async (hash: string, chainId: string): Promise<TxDetails> => {\n    const data = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"eth_getTransactionByHash\",\n        \"params\": [hash],\n        \"id\": 1\n    };\n    const response = await ethInstance.post(\n        \"\",\n        data\n    );\n    const { result } = response.data;\n    console.info(`got trx details: ${result}`)\n    return result;\n};\n\n/**\n * https://docs.infura.io/infura/networks/ethereum/json-rpc-methods/parity_nextnonce\n * @param address\n * @param chainId\n */\nexport const infuraGetAccountNonce = async (address: string, chainId: string): Promise<number> => {\n    const data = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"parity_nextNonce\",\n        \"params\": [address],\n        \"id\": 1\n    };\n    const response = await ethInstance.post(\n        \"\",\n        data\n    );\n    const { result } = response.data;\n    console.info(`got nonce: ${result}`)\n    return result;\n};\n\nexport const infuraGetGasPrices = async (chainId: string): Promise<string> => {\n    const data = {\n        \"jsonrpc\": \"2.0\",\n        \"method\": \"eth_gasPrice\",\n        \"params\": [],\n        \"id\": 1\n    };\n    const response = await ethInstance.post('', data);\n    const { result } = response.data;\n    console.debug(`gas price for chainId ${chainId} response ${result}`);\n    return result;\n};\n","import {AssetData, ParsedTx, TxDetails} from \"../helpers/types\";\nimport {apiGetAccountBalance, apiGetAccountNonce, apiGetAccountTransactions, apiGetGasPrices} from \"./api\";\nimport {\n    infuraGetAccountBalance,\n    infuraGetAccountNonce,\n    infuraGetGasPrices,\n    infuraGetTransactionByHash\n} from \"./infura-api\";\nimport {toWad} from \"../helpers\";\n\nexport interface RpcApi {\n    getAccountBalance(address: string, chainId: string): Promise<AssetData>;\n    getAccountNonce(address: string, chainId: string): Promise<number>;\n    getGasPrices(chainId: string): Promise<string>;\n    getAccountTransactions(address: string, chainId: string): Promise<ParsedTx[]>;\n    getTransactionByHash(address: string, chainId: string): Promise<TxDetails>;\n}\n\nexport class InfuraApi implements RpcApi {\n    getAccountBalance(address: string, chainId: string): Promise<AssetData> {\n        return infuraGetAccountBalance(address, chainId);\n    }\n\n    getAccountNonce(address: string, chainId: string): Promise<number> {\n        return infuraGetAccountNonce(address, chainId);\n    }\n\n    //https://eth.wiki/json-rpc/API\n    //curl 'https://kovan.infura.io/v3/f785cca3f0854d5a9b04078a6e380b09' -X POST -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:101.0) Gecko/20100101 Firefox/101.0' -H 'Accept: application/json' -H 'Accept-Language: en-US,en;q=0.5' -H 'Accept-Encoding: gzip, deflate, br' -H 'Content-Type: application/json' -H 'Origin: http://localhost:3000' -H 'Connection: keep-alive' -H 'Referer: http://localhost:3000/' -H 'Sec-Fetch-Dest: empty' -H 'Sec-Fetch-Mode: cors' -H 'Sec-Fetch-Site: cross-site' -H 'Sec-GPC: 1' -H 'TE: trailers' --data-raw '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getBalance\",\"params\":[\"0x778dAac766b448cf0Ea7D9ac9422fC7c0D2e12f2\",\"latest\"],\"id\":1 }'\n    getGasPrices(chainId: string): Promise<string> {\n        return infuraGetGasPrices(chainId);\n    }\n\n    getTransactionByHash(address: string, chainId: string): Promise<TxDetails> {\n        return infuraGetTransactionByHash(address, chainId);\n    }\n\n    getAccountTransactions(address: string, chainId: string): Promise<ParsedTx[]> {\n        return Promise.resolve([]);\n    }\n\n}\n\n/**\n * https://ethereum-api.xyz/supported-chains\n */\nexport class EthereumXyzApi implements RpcApi {\n    getAccountBalance(address: string, chainId: string): Promise<AssetData> {\n        return apiGetAccountBalance(address, chainId);\n    }\n\n    getAccountNonce(address: string, chainId: string): Promise<number> {\n        return apiGetAccountNonce(address, chainId);\n    }\n\n    async getGasPrices(chainId: string): Promise<string> {\n        const gasPrices = await apiGetGasPrices(chainId);\n        console.info(`got gas prices ${gasPrices}`);\n        return toWad(`${gasPrices.slow.price}`, 9).toHexString();\n    }\n\n    async getAccountTransactions(address: string, chainId: string): Promise<ParsedTx[]> {\n        return apiGetAccountTransactions(address, chainId);\n    }\n\n    getTransactionByHash(address: string, chainId: string): Promise<TxDetails> {\n        //\n        throw new Error(\"not impl\");\n    }\n}\n\nexport class RpcSourceAdapter implements RpcApi {\n    infuraRpcApi: RpcApi = new InfuraApi();\n    ethereumXyzRpcApi = new EthereumXyzApi();\n\n    getAccountBalance(address: string, chainId: string): Promise<AssetData> {\n        if (chainId.includes('eip155:80001')) {\n            //EthereumXYZ does not support polygon! ()\n            return this.infuraRpcApi.getAccountBalance(address, chainId);\n        }\n        return this.ethereumXyzRpcApi.getAccountBalance(address, chainId);\n    }\n\n    getAccountNonce(address: string, chainId: string): Promise<number> {\n        // if (chainId.includes('eip155:42')) {\n        //     return this.infuraRpcApi.getAccountNonce(address, chainId);\n        // }\n        return this.ethereumXyzRpcApi.getAccountNonce(address, chainId);\n    }\n\n    async getGasPrices(chainId: string): Promise<string> {\n        // if (chainId.includes('eip155:42')) {\n        //     let gasPrices = this.infuraRpcApi.getGasPrices(chainId);\n        //     return gasPrices;\n        // }\n        return this.ethereumXyzRpcApi.getGasPrices(chainId);\n    }\n\n    getAccountTransactions(address: string, chainId: string): Promise<ParsedTx[]> {\n        return this.ethereumXyzRpcApi.getAccountTransactions(address, chainId);\n    }\n\n    getTransactionByHash(hash: string, chainId: string): Promise<TxDetails> {\n        return infuraGetTransactionByHash(hash, chainId);\n    }\n\n}\n","import * as encoding from \"@walletconnect/encoding\";\nimport {BigNumber, utils} from \"ethers\";\n\nimport {toWad} from \"./utilities\";\nimport {AccountBalances} from \"./types\";\nimport {web3} from \"../utils/walletConnect\";\nimport {RpcApi, RpcSourceAdapter} from \"../rpc/rpc-api\";\n\n\nexport const currentRpcApi: RpcApi = new RpcSourceAdapter();\n\nexport async function getGasPrice(chainId: string): Promise<string> {\n    //TODO wtf hardcoded gas price for ethereum mainnet?\n    //if (chainId === \"eip155:1\") return toWad(\"20\", 9).toHexString();\n    const gasPrices = await currentRpcApi.getGasPrices(chainId);\n    return gasPrices\n}\n\n\nfunction debugTransactionEncodingDecoding(_value: any, value: string) {\n    //TODO this is only debug code\n    const bigN = BigNumber.from(_value.toString())\n    const formatted = utils.formatUnits(bigN, \"ether\")\n    console.info(`transaction value: ${_value} number bigN: ${bigN} formatted: ${formatted} - hex: ${value}`)\n    const val1 = web3.utils.hexToNumber(value);\n    const val2 = web3.utils.toDecimal(value);\n    const val3 = encoding.hexToNumber(value);\n    console.debug(`TRANS decoded value 1:${val1} 2:${val2} 3:${val3}`)\n}\n\n/**\n * See transaction https://explorer.anyblock.tools/ethereum/ethereum/kovan/tx/0x346fd04ddb4a0727e1a7d6ee68c752261eb8ee3c2a5b6f579f7bfcbcbd0ee034/\n * by hash\n *\n * FIXME\n * transaction value: 123500000000000 WEI formatted: 0.0001235 ETH produces problems when converting to hex\n * make tests for it. The hex below doesn't contain the full value but only a small part\n * transaction value: 123500000000000 number bigN: 123500000000000 formatted: 0.0001235 - hex: 95a13800 sanitized: 0x95a13800 tx.ts:64\n * transaction value hex2: 0x705295a13800 hex3: 0x705295a13800 sanitized: 0x705295a13800\n * TRANS decodvalue:2510370816000000000000000000 WEI decimal:2510370816 decoded:2510370816 ETH - f: 0.000000002510370816\n *\n *\n * @param account\n * @param sendAmount\n * @param orderId\n */\nexport async function generateTransaction(account: string, sendAmount: number, orderTrackingId: string): Promise<ITransaction> {\n    const toAddress = \"0x96fca7a522a4ff7aa96b62a155914a831fe2ac05\";\n\n    const [namespace, reference, address] = account.split(\":\");\n    const chainId = `${namespace}:${reference}`;\n\n    let _nonce;\n    try {\n        _nonce = await currentRpcApi.getAccountNonce(address, chainId);\n    } catch (error) {\n        throw new Error(`failed to fetch nonce for address ${address} on chain ${chainId}`);\n    }\n\n    const nonce = encoding.sanitizeHex(encoding.numberToHex(_nonce));\n\n    const _gasPrice = await getGasPrice(chainId);\n    console.info(`gas price number: ${_gasPrice}`);\n\n    const gasPrice = encodeNumberAsHex(Number(_gasPrice));\n\n    // FIXME this should also be a param\n    // Transaction gas is too low. There is not enough gas to cover minimal cost of the transaction (minimal: 21112, got: 21000). Try increasing supplied gas.\n    const _gasLimit = 21112;\n    const gasLimit = encodeNumberAsHex(_gasLimit)\n\n    const _value = toWad(sendAmount.toString());\n    console.info(`send amount ${sendAmount} toWad -> ${_value} `)\n    // const _value = 123500000000000; //transaction value: 123500000000000 WEI formatted: 0.0001235 ETH\n\n    const value = encoding.sanitizeHex(_value.toHexString());\n    //debugTransactionEncodingDecoding(_value, value);\n\n    // TODO add transaction id here, maybe a hash function of the qrcode & timestamp could be good\n    // const orderIdEncoded = encoding.utf8ToHex(orderTrackingId);\n    // const data = encoding.sanitizeHex(orderIdEncoded);\n    // console.info(`encoding orderId: ${orderTrackingId} -> ${orderIdEncoded}`)\n\n    const data = '0x'\n\n    const tx = { from: address, to: toAddress, data: data, nonce: nonce, gasPrice: gasPrice, gasLimit: gasLimit, value: value};\n    return tx;\n}\n\n\nexport const encodeNumberAsHex = (value: number): string => {\n    const hex3 = web3.utils.numberToHex(value);\n    const sanitized = encoding.sanitizeHex(hex3);\n    return sanitized;\n}\n\nexport const getHexValueAsBigNumberUsingNumber = (value: string): string => {\n    const decoded = web3.utils.hexToNumber(value);\n    return utils.formatUnits(decoded, \"ether\")\n}\n\nexport const getHexValueAsBigNumber = (value: string): BigNumber => {\n    const bigNumber = BigNumber.from(value);\n    return bigNumber;\n}\nexport const getHexValueAsString = (value: string): string => {\n    //const decoded = web3.utils.big(value);\n    const bigNumber = BigNumber.from(value);\n    return utils.formatUnits(bigNumber, \"ether\")\n}\n\nexport const getWeiToString = (value: string): string => {\n    const formatted = utils.formatUnits(value, \"ether\")\n    return formatted\n}\n\n\nexport interface ITransaction {\n    from: string;\n    to: string;\n    data: string;\n    nonce: string;\n    gasPrice: string;\n    gasLimit: string;\n    value: string;\n}\n\nexport interface AccountBalance {\n    account: string;\n    balance: BigNumber;\n    balanceUsd: BigNumber;\n    balanceString: string;\n    token: string;\n}\n\n//TODO this returns the latest account in the list with non-zero amount\nexport function getNonZeroAccountBalance(accounts: string[], balances: AccountBalances): AccountBalance {\n    let balanceString = \"0.00\";\n    let firstNonZeroAccount = accounts[0];\n    let accountBalance = BigNumber.from(0);\n    let accountBalanceUSD = BigNumber.from(0);\n    let balanceToken: string | null = null;\n    accounts.forEach(value => {\n        let accountBalances = balances[value];\n        if (!accountBalances) {\n            console.info(`getBalanceInUSD: account balances not defined for account: ${value}`)\n            return;\n        }\n        let balanceElement = accountBalances[0];\n        let balance = BigNumber.from(0);\n        try {\n            balance = BigNumber.from(balanceElement.balance || \"0\");\n        }\n        catch (e) {\n            console.log(`balance parse error ${e}`);\n        }\n\n        if (balance.gt(0) && balanceToken == null) {\n            let formatEther = utils.formatEther(balance);\n            console.debug(`getBalanceInUSD account ${value} with balance ${balance}. formatted balance ${formatEther}`)\n\n            firstNonZeroAccount = value;\n            accountBalance = utils.parseUnits(balance.toString(), \"ether\")\n            accountBalanceUSD = accountBalance;\n            balanceString = formatEther;\n            balanceToken = balanceElement.symbol;\n        }\n    })\n    return {\n        token: balanceToken || 'ETH',\n        account: firstNonZeroAccount,\n        balance: accountBalance,\n        balanceUsd: accountBalanceUSD,\n        balanceString: balanceString,\n    }\n}\n","import {chainData} from \"../consts\";\nimport {ellipseAddress} from \"../helpers\";\n\nexport const sleep = async (ms: number) => {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n\nexport const getConnectionStatusDisplay = (account: string) : string => {\n  if (account) {\n\n   return `${getConnectionNetwork(account)}`;\n  }\n  return 'Disconnected';\n}\n\nconst getConnectionNetwork = (account: string) : string => {\n  const [namespace, reference] = account.split(':');\n  if (chainData[namespace] && chainData[namespace][reference]) {\n    const chainMeta = chainData[namespace][reference];\n    return chainMeta.name;\n  }\n  return \"\"\n}\n\nexport const getDisplayName = (account: string, ensName: string | null) : string => {\n  let name = '';\n  if (ensName) {\n    name = ensName;\n  } else if (account) {\n    const [namespace, reference, address] = account.split(':');\n\n    if (chainData[namespace] && chainData[namespace][reference]) {\n      const chainMeta = chainData[namespace][reference];\n      console.info(`chainMeta ${chainMeta.symbol} ${chainMeta.currency} ${chainMeta.name}`);\n      name = ellipseAddress(address);\n    }\n  }\n  return name;\n}\n","export enum EUserActionTypes {\n  LOGIN_REQUEST = 'USER/LOGIN_REQUEST',\n  LOGIN_SUCCESS = 'USER/LOGIN_SUCCESS',\n  GET_MERCHANT_INFO = 'USER/MERCHANT_LOGIN_SUCCESS',\n  LOGIN_FAILED = 'USER/LOGIN_FAILED',\n  LOGOUT_REQUEST = 'USER/LOGOUT_REQUEST',\n  GET_USER_INFO_SUCCESS = 'USER/GET_USER_INFO_SUCCESS',\n  GET_MERCHANT_INFO_SUCCESS = 'USER/GET_MERCHANT_INFO_SUCCESS',\n  GET_ENS_NAME_SUCCESS = 'USER/GET_ENS_NAME_SUCCESS',\n  GET_PRICE_TICKERS_SUCCESS = 'USER/GET_PRICE_TICKERS_SUCCESS',\n  SET_TRANSACTION_IN_PROGRESS = 'USER/SET_TRANSACTION_IN_PROGRESS',\n  SET_CREATE_TRANSACTION = 'USER/SET_CREATE_TRANSACTION',\n  UNSET_TRANSACTION = 'USER/UNSET_TRANSACTION',\n  SET_TRANSACTION_SUCCESS = 'USER/SET_TRANSACTION_SUCCESS',\n  SET_TRANSACTION_INFO = 'USER/SET_TRANSACTION_INFO',\n  CREATE_ORDER = 'USER/CREATE_ORDER',\n  CREATE_ORDER_SUCCESS = 'USER/CREATE_ORDER_SUCCESS',\n  GET_ORDER_SUCCESS = 'USER/GET_ORDER_SUCCESS',\n  GET_ORDER = 'USER/GET_ORDER',\n  SET_ORDER_TRANSACTION_HASH = 'USER/SET_ORDER_TRANSACTION_HASH',\n  CREATE_MERCHANT = 'USER/CREATE_MERCHANT',\n  CREATE_MERCHANT_SUCCESS = 'USER/CREATE_MERCHANT_SUCCESS',\n}\n","//TODO maybe this should be fixed\n// This chain data is used in the menu, and account modal to show info about selected chains.\nexport const chainData: any = {\n  bep20: {\n    '1': {\n      id: 'bep20:1',\n      name: 'Smart Chain',\n      rpc: ['https://bsc-dataseed.binance.org'],\n      slip44: 60,\n      testnet: false,\n      logo: '/bnb.png',\n      rgb: '243, 186, 44',\n      symbol: 'BSC',\n    },\n  },\n  // bip122: {\n  //   '000000000019d6689c085ae165831e93': {\n  //     id: 'bip122:000000000019d6689c085ae165831e93',\n  //     name: 'Bitcoin Mainnet',\n  //     rpc: ['https://bsc-dataseed.binance.org'],\n  //     slip44: 60,\n  //     testnet: false,\n  //     logo: '/btc.png',\n  //     rgb: '243, 186, 44',\n  //     symbol: 'BTC',\n  //   },\n  // },\n  solana: {\n    '4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ': {\n      id: 'solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ',\n      name: 'Solana Mainnet',\n      rpc: ['https://api.mainnet-beta.solana.com', 'https://solana-api.projectserum.com'],\n      slip44: 501,\n      testnet: false,\n      logo: '/solana_logo.png',\n      rgb: '0, 0, 0',\n      symbol: 'SOL',\n    },\n  },\n  eip155: {\n    '1': {\n      name: 'Ethereum Mainnet',\n      id: 'eip155:1',\n      rpc: ['https://api.mycryptoapi.com/eth'],\n      slip44: 60,\n      testnet: false,\n      logo: 'https://blockchain-api.xyz/logos/eip155:1.png',\n      rgb: '99, 125, 234',\n      symbol: 'ETH',\n    },\n    '42': {\n      name: 'Ethereum Kovan',\n      id: 'eip155:42',\n      rpc: ['https://kovan.infura.io/v3/f785cca3f0854d5a9b04078a6e380b09'],\n      slip44: 60,\n      testnet: true,\n      logo: 'https://blockchain-api.xyz/logos/eip155:1.png',\n      rgb: '99, 125, 234',\n      symbol: 'ETH',\n    },\n    '137': {\n      name: 'Polygon Mainnet',\n      id: 'eip155:137',\n      rpc: ['https://rpc-mainnet.matic.network'],\n      slip44: 60,\n      testnet: false,\n      logo: 'https://blockchain-api.xyz/logos/eip155:137.png',\n      rgb: '130, 71, 229',\n      symbol: 'MATIC',\n    },\n    '80001': {\n      name: 'Polygon Mumbai',\n      id: 'eip155:80001',\n      rpc: ['https://rpc-mumbai.matic.today'],\n      slip44: 60,\n      testnet: true,\n      logo: 'https://blockchain-api.xyz/logos/eip155:137.png',\n      rgb: '130, 71, 229',\n      symbol: 'MATIC',\n    },\n  },\n};\n","import React from 'react';\n\nexport const Landing = () => (\n  <div className=\"flex flex-col items-center direction-column text-center justify-center h-full w-full\">\n    <div className=\"w-20 h-20\">\n        <div className=\"thecube w-20 h-20 m-1\">\n            <div className=\"cube c1\"></div>\n            <div className=\"cube c2\"></div>\n            <div className=\"cube c4\"></div>\n            <div className=\"cube c3\"></div>\n        </div>\n    </div>\n    <p className=\"mt-10 text-white text-sm\">Loading...</p>\n  </div>\n);\n","import axios from 'axios';\nimport {isDevMode} from \"../config/appconfig\";\n\n// DEV\naxios.defaults.baseURL = 'http://localhost:5000/';\n\n// DEV\nconst devUrl = 'http://localhost:5000/';\n// Test (http/https)\n//const testNoSslUrl = 'http://fundapi-test.us-east-2.elasticbeanstalk.com/';\nconst testUrl = 'https://test-api.jxndao.com/';\n// PROD\n// axios.defaults.baseURL = 'https://api.jxndao.com/';\n\nexport const apiBaseUrl = isDevMode() ? devUrl : testUrl;\naxios.defaults.baseURL = apiBaseUrl;\n\naxios.defaults.headers.common['Content-Type'] = 'application/json';\n\naxios.interceptors.response.use(\n  response => response,\n  err => {\n    console.info(`error_code :${err.response.data.code} message: ${err.response.data.message}`)\n    const error = err.response;\n    throw error || err;\n  }\n);\n\nconst AxiosService = function () {\n  let AuthorizationToken: any = '';\n  let Nonce: any = '';\n\n  function addHeaders(userConfig: any) {\n    const globalHeaders: any = {};\n\n    // You can set global headers here\n    if (AuthorizationToken) {\n      globalHeaders['Authorization'] = `${AuthorizationToken}`;\n    }\n\n    if (Nonce) {\n      globalHeaders['WWW-Authenticate'] = `${Nonce}`;\n    }\n\n    const { headers } = userConfig;\n\n    // Return extended config\n    return {\n      headers: {\n        ...globalHeaders,\n        ...headers,\n      },\n    };\n  }\n\n  // Set authorization token\n  function setAuthorizationToken(token: string) {\n    AuthorizationToken = token;\n  }\n\n  function setNonce(nonce: string) {\n    Nonce = nonce;\n  }\n\n  function getNonce() : string {\n    return Nonce;\n  }\n\n  function getSignature() : string {\n    return AuthorizationToken;\n  }\n\n\n  // GET method\n  function get(endPoint: string, userConfig = {}) {\n    return axios.get(endPoint, addHeaders(userConfig));\n  }\n\n  // POST method\n  function post(endPoint: string, params = {}, userConfig = {}, includeHeaders: boolean = true) {\n    return axios.post(endPoint, params, includeHeaders ? addHeaders(userConfig) : {});\n  }\n\n  // Patch method\n  function patch(endPoint: string, params = {}, userConfig = {}) {\n    return axios.patch(endPoint, params, addHeaders(userConfig));\n  }\n\n  function put(endPoint: string, params = {}, userConfig = {}) {\n    return axios.put(endPoint, params, addHeaders(userConfig));\n  }\n\n  function del(endPoint: string, userConfig = {}) {\n    return axios.delete(endPoint, addHeaders(userConfig));\n  }\n\n  return {\n    setAuthorizationToken,\n    setNonce,\n    get,\n    post,\n    put,\n    patch,\n    del,\n    getNonce,\n    getSignature\n  };\n};\n\n// let's return back our create method as the default.\nexport default AxiosService();\n","import { EUserActionTypes } from '../../enums';\nimport {\n  IAccountInfo,\n  IMerchant,\n  IOrder,\n  ITicker,\n  ITransactionInfo,\n  ITransactionOrder,\n  IUserInfo,\n  TransactionState\n} from '../../models';\nimport * as H from \"history\";\n\n//namespace, reference, address\nconst loginSuccess = (payload: IAccountInfo) => {\n  return {\n    type: EUserActionTypes.LOGIN_SUCCESS,\n    payload,\n  };\n};\n\nconst getAccountInfoSuccess = (payload: IUserInfo) => {\n  return {\n    type: EUserActionTypes.GET_USER_INFO_SUCCESS,\n    payload,\n  };\n};\n\nconst getMerchantInfoSuccess = (payload: IMerchant) => {\n  return {\n    type: EUserActionTypes.GET_MERCHANT_INFO_SUCCESS,\n    payload,\n  };\n};\n\nconst getEnsNameSuccess = (payload: string) => {\n  return {\n    type: EUserActionTypes.GET_ENS_NAME_SUCCESS,\n    payload,\n  };\n};\n\nconst getTickersSuccess = (payload: ITicker[]) => {\n  return {\n    type: EUserActionTypes.GET_PRICE_TICKERS_SUCCESS,\n    payload,\n  };\n};\n\nconst setTransactionInProgress = (payload: TransactionState) => {\n  console.info(`setTransactionInProgress as ${payload}`)\n  return {\n    type: EUserActionTypes.SET_TRANSACTION_IN_PROGRESS,\n    payload,\n  };\n};\n\nconst setTransactionInfoWallet = (payload: ITransactionInfo) => {\n  console.info(`setting transaction as hash: ${payload.transactionHash} value: ${payload.transaction?.value} toAddress: ${payload.transaction?.to}`)\n  return {\n    type: EUserActionTypes.SET_TRANSACTION_INFO,\n    payload,\n  };\n};\n\nconst setCreateTransaction = (payload: { amount: number;  account: string; orderTrackingId: string}) => {\n  return {\n    type: EUserActionTypes.SET_CREATE_TRANSACTION,\n    payload\n  };\n};\n\nconst unsetTransaction = () => {\n  return {\n    type: EUserActionTypes.UNSET_TRANSACTION,\n  };\n};\n\nconst setCreateTransactionSuccess = (payload: ITransactionOrder | null) => {\n  return {\n    type: EUserActionTypes.SET_TRANSACTION_SUCCESS,\n    payload,\n  };\n};\n\nconst setCreateOrderSuccess = (payload: IOrder) => {\n  console.info(`setCreateOrderSuccess order ${payload.amount} ${payload.externalOrderId} tracking: ${payload.trackingId}`)\n  return {\n    type: EUserActionTypes.CREATE_ORDER_SUCCESS,\n    payload\n  };\n};\n\n\nconst setCreateMerchantSuccess = (payload: IMerchant) => {\n  console.info(`setCreateMerchantSuccess order ${payload.merchantName} ${payload.memberAddress}`)\n  return {\n    type: EUserActionTypes.CREATE_MERCHANT_SUCCESS,\n    payload\n  };\n};\n\nconst getOrderSuccess = (payload: IOrder) => {\n  console.info(`getOrderSuccess order ${payload.amount} ${payload.externalOrderId} tracking: ${payload.trackingId}`)\n  return {\n    type: EUserActionTypes.GET_ORDER_SUCCESS,\n    payload\n  };\n};\n\nconst setOrderTransactionHash = (payload: {orderTrackingId: string, transactionHash: string, nativeAmount: string }) => {\n  return {\n    type: EUserActionTypes.SET_ORDER_TRANSACTION_HASH,\n    payload\n  };\n};\n\n\nconst merchantLoginSuccess = (payload: {address: string}) => {\n  return {\n    type: EUserActionTypes.GET_MERCHANT_INFO,\n    payload\n  };\n};\n\nconst createOrder = (payload: IOrder) => {\n  return {\n    type: EUserActionTypes.CREATE_ORDER,\n    payload\n  };\n};\n\nconst createMerchant = (payload: IMerchant, history: H.History) => {\n  return {\n    type: EUserActionTypes.CREATE_MERCHANT,\n    payload: {merchant: payload, history: history}\n  };\n};\n\nconst getOrder = (payload: { orderTrackingId: String }) => {\n  return {\n    type: EUserActionTypes.GET_ORDER,\n    payload\n  };\n};\n\nexport const userAction = {\n  loginSuccess,\n  getAccountInfoSuccess,\n  getMerchantInfoSuccess,\n  getOrderSuccess,\n  getEnsNameSuccess,\n  getTickersSuccess,\n  setTransactionInProgress,\n  setTransactionInfoWallet,\n  setCreateTransaction,\n  unsetTransaction,\n  setCreateTransactionSuccess,\n  setCreateOrderSuccess,\n  setOrderTransactionHash,\n  createOrder,\n  getOrder,\n  merchantLoginSuccess,\n  createMerchant,\n  setCreateMerchantSuccess\n};\n","\nexport const DEVELOPMENT = 0\nexport const TEST = 1\n\nconst MAINNET_MODE = false;\n\n\nexport const BUILD_CONFIG = DEVELOPMENT;\n// export const BUILD_CONFIG = TEST;\n\n// @ts-ignore\nexport const isDevMode = () => BUILD_CONFIG === DEVELOPMENT;\n\n\nexport const isTestnetMode = () => !MAINNET_MODE;\n\n\nconst ethereumGorliTestnetRpcUrl = \"https://goerli.infura.io/v3/f785cca3f0854d5a9b04078a6e380b09\";\nconst ethereumMainnetRpcUrl = 'https://mainnet.infura.io/v3/cd5b0778994b4e34b166f2569a1166c0';\n\n//TODO Move to move to another INFURA account, since polygon mumbai api requires credit card\nconst polygonTestnetRpcUrl = \"https://matic-testnet-archive-rpc.bwarelabs.com/\";\nconst polygonMainnetRpcUrl = \"https://rpc-mainnet.matic.network\";\n\n\n\nexport const ethereumRpcUrl = MAINNET_MODE && !isDevMode() ? ethereumMainnetRpcUrl : ethereumGorliTestnetRpcUrl;\nexport const polygonRpcUrl = MAINNET_MODE && !isDevMode() ?  polygonMainnetRpcUrl : polygonTestnetRpcUrl;\n","import axios from './axios';\nimport {IMerchant, IOrder} from \"../models\";\n\nexport const UserService = (function () {\n  const loginApi = async (payload: string) => {\n    return axios.get(`/fund/members/${payload}/login`);\n  };\n\n  const getMeApi = async () => {\n    return axios.get('/fund/members/me');\n  };\n\n  const getTickersApi = async () => {\n    return axios.get('/tickers');\n  };\n\n  const nonceApi = async (payload: string) => {\n    return axios.get(`/merchants/${payload}/nonce`);\n  };\n\n  const getMerchantInfoApi = async (address: string) => {\n    return axios.get(`/merchants/${address}`);\n  };\n\n  const getOrderApi = async (orderTrackingId: string) => {\n    return axios.get(`/merchants/orders/${orderTrackingId}`);\n  };\n\n  const createNewOrder = async (address: string, order: IOrder) => {\n    return axios.post(`/merchants/${address}/orders`, order);\n  };\n\n  const createNewMerchant = async (order: IMerchant) => {\n    return axios.post(`/merchants?nonce=${axios.getNonce()}&signature=${axios.getSignature()}`, order, {}, false);\n  };\n\n  const linkOrderTransaction = async (orderTrackingId: string, transactionHash: string, nativeAmount: number) => {\n    return axios.post(`/merchants/orders/${orderTrackingId}/transaction`, {transactionHash: transactionHash, nativeAmount: nativeAmount});\n  };\n\n  return {\n    loginApi,\n    getMeApi,\n    getTickersApi,\n    getMerchantInfoApi,\n    createNewOrder,\n    getOrderApi,\n    linkOrderTransaction,\n    createNewMerchant,\n    nonceApi\n  };\n})();\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {IMerchant, IOrder, ITicker, ITransactionInfo, ITransactionOrder, IUserInfo} from '.';\nimport {ITransaction} from \"../helpers/tx\";\n\nexport interface IRootState {\n  userState: IUserState;\n}\n\nexport interface IAccountInfo {\n  address: string;\n  namespace: string;\n  reference: string;\n}\n\nexport enum TransactionState {\n  INITIAL,IN_PROGRESS,FINISHED\n}\n\nexport interface IUserState {\n  isLogged: boolean;\n  loading: boolean;\n  account: string;\n  nonce: string;\n  signature: string;\n  error?: string;\n  ensName?: string;\n  accountInfo?: IAccountInfo;\n  userInfo?: IUserInfo;\n  merchantInfo?: IMerchant;\n  tickers: ITicker[];\n  transactionData: ITransactionOrder | null;\n  transactionInfo: ITransactionInfo | null;\n  order: IOrder | null;\n  transactionInProgress: TransactionState;\n}\n\n\n","import {IUserState, TransactionState} from '../../models';\n\nexport const userState: IUserState = {\n  isLogged: false,\n  loading: false,\n  nonce: '',\n  account: '',\n  ensName: '',\n  signature: '',\n  tickers: [],\n  transactionInfo: null,\n  transactionInProgress: TransactionState.INITIAL,\n  accountInfo: undefined,\n  transactionData: null,\n  userInfo: undefined,\n  order: null,\n};\n","import { IRootState } from '../../models';\nimport { userState } from './user.state';\n\nconst rootState: IRootState = {\n  userState,\n};\n\nexport default rootState;\n","import { produce } from 'immer';\n\nimport { createReducer } from '.';\nimport { userActionTypes } from '../../consts';\nimport {\n  IAccountInfo,\n  IAction,\n  IMerchant, IOrder,\n  ITicker,\n  ITransactionInfo, ITransactionOrder,\n  IUserInfo,\n  IUserState,\n  TransactionState\n} from '../../models';\nimport { userState } from '../states/user.state';\n\nexport const userReducer = createReducer<IUserState>(userState, {\n  [userActionTypes.LOGIN_SUCCESS]: setLoginSuccessStatus,\n  [userActionTypes.GET_ENS_NAME_SUCCESS]: setEnsNameStatus,\n  [userActionTypes.GET_USER_INFO_SUCCESS]: setUserInfo,\n  [userActionTypes.GET_MERCHANT_INFO_SUCCESS]: setMerchantInfo,\n  [userActionTypes.GET_PRICE_TICKERS_SUCCESS]: setTickersStatus,\n  [userActionTypes.SET_TRANSACTION_IN_PROGRESS]: setTransactionInProgress,\n  [userActionTypes.SET_TRANSACTION_INFO]: setTransactionInfo,\n  [userActionTypes.SET_TRANSACTION_SUCCESS]: setTransactionData,\n  [userActionTypes.CREATE_ORDER_SUCCESS]: setOrderData,\n  [userActionTypes.GET_ORDER_SUCCESS]: setOrderData,\n  [userActionTypes.CREATE_MERCHANT_SUCCESS]: setMerchantInfo,\n});\n\nfunction setLoginSuccessStatus(state: IUserState, { payload }: IAction<IAccountInfo>) {\n  return produce(state, draft => {\n    draft.loading = false;\n    draft.isLogged = true;\n    draft.accountInfo = payload;\n  });\n}\n\nfunction setEnsNameStatus(state: IUserState, { payload }: IAction<string>) {\n  return produce(state, draft => {\n    draft.ensName = payload;\n  });\n}\n\nfunction setTickersStatus(state: IUserState, { payload }: IAction<ITicker[]>) {\n  return produce(state, draft => {\n    draft.tickers = payload;\n  });\n}\n\nfunction setTransactionInProgress(state: IUserState, { payload }: IAction<TransactionState>) {\n  return produce(state, draft => {\n    draft.transactionInProgress = payload;\n  });\n}\n\nfunction setTransactionInfo(state: IUserState, { payload }: IAction<ITransactionInfo>) {\n  return produce(state, draft => {\n    draft.transactionInfo = payload;\n  });\n}\n\nfunction setUserInfo(state: IUserState, { payload }: IAction<IUserInfo>) {\n  return produce(state, draft => {\n    draft.userInfo = payload;\n  });\n}\n\nfunction setMerchantInfo(state: IUserState, { payload }: IAction<IMerchant>) {\n  return produce(state, draft => {\n    draft.merchantInfo = payload;\n  });\n}\n\nfunction setTransactionData(state: IUserState, { payload }: IAction<ITransactionOrder>) {\n  return produce(state, draft => {\n    draft.transactionData = payload;\n  });\n}\n\n/**\n * called by both CREATE_ORDER_SUCCESS & GET_ORDER_SUCCESS user actions\n * @param state\n * @param payload\n */\nfunction setOrderData(state: IUserState, { payload }: IAction<IOrder>) {\n  return produce(state, draft => {\n    draft.order = payload;\n  });\n}\n","import { Reducer, combineReducers } from 'redux';\n\nimport { IAction } from '../../models';\nimport { userReducer } from './user.reducer';\n\nexport function createReducer<S>(initialState: S, handlers: any): Reducer<S> {\n  const r = (state: S = initialState, action: IAction<S>): S => {\n    if (handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action);\n    } else {\n      return state;\n    }\n  };\n\n  return r as Reducer<S>;\n}\n\nconst rootReducer = () =>\n  combineReducers({\n    userState: userReducer,\n  });\n\nexport default rootReducer();\n","import {all, call, put, takeLatest} from 'redux-saga/effects';\nimport {AxiosResponse} from 'axios';\nimport {EUserActionTypes} from '../../enums';\nimport {UserService} from '../../services';\nimport {userAction} from '../actions';\nimport {toast} from 'react-toastify';\nimport {ens} from '../../utils/walletConnect';\nimport {IMerchant, IOrder, ITicker, ITransactionOrder, IUserInfo} from '../../models';\nimport {generateTransaction, ITransaction} from \"../../helpers/tx\";\nimport * as H from \"history\";\n\nexport function storageKey(storagePrefix: string): string {\n  return `${storagePrefix}`;\n}\n\nexport default function* root() {\n  yield all([\n    takeLatest(EUserActionTypes.LOGIN_REQUEST as any, watchGetEnsName),\n    takeLatest(EUserActionTypes.LOGIN_SUCCESS as any, watchGetTickers),\n\n    takeLatest(EUserActionTypes.SET_CREATE_TRANSACTION as any, watchCreateTransactions),\n    takeLatest(EUserActionTypes.UNSET_TRANSACTION as any, watchUnsetTransaction),\n\n    takeLatest(EUserActionTypes.CREATE_ORDER as any, watchCreateNewOrder),\n\n    takeLatest(EUserActionTypes.SET_ORDER_TRANSACTION_HASH as any, watchLinkOrderTransaction),\n\n    takeLatest(EUserActionTypes.GET_MERCHANT_INFO as any, watchGetMerchantInfo),\n\n    takeLatest(EUserActionTypes.GET_ORDER as any, watchGetOrderInfo),\n\n    takeLatest(EUserActionTypes.CREATE_MERCHANT as any, watchCreateMerchant),\n  ]);\n}\n\nfunction* watchGetEnsName(action: { type: EUserActionTypes; payload: string }) {\n  try {\n    let ensName;\n    let address: string = '';\n    ({ name: ensName } = yield ens.getName(action.payload));\n\n    if (ensName) {\n      address = yield ens.name(ensName).getAddress();\n    }\n\n    if (ensName && address !== action.payload) {\n      ensName = '';\n    }\n\n    yield put(userAction.getEnsNameSuccess(ensName));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchGetAccountInfo() {\n  try {\n    const res: AxiosResponse<IUserInfo> = yield call(UserService.getMeApi);\n    yield put(userAction.getAccountInfoSuccess(res.data));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchGetMerchantInfo(action: { type: EUserActionTypes; payload: {address: string}}) {\n  try {\n    console.log(`watchGetMerchantInfo`)\n    const res: AxiosResponse<IMerchant> = yield call(() => UserService.getMerchantInfoApi(action.payload.address));\n    yield put(userAction.getMerchantInfoSuccess(res.data));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchGetOrderInfo(action: { type: EUserActionTypes; payload: {orderTrackingId: string}}) {\n  try {\n    console.log(`watchGetOrderInfo orderTrackingId: ${action.payload.orderTrackingId}`)\n    const res: AxiosResponse<IOrder> = yield call(() => UserService.getOrderApi(action.payload.orderTrackingId));\n    yield put(userAction.getOrderSuccess(res.data));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchCreateNewOrder(action: { type: EUserActionTypes; payload: IOrder}) {\n  try {\n    const res: AxiosResponse<IOrder> = yield call(() => UserService.createNewOrder(action.payload.toAddress, action.payload));\n    if (res.status !== 200) {\n      console.error(`error result in create new order`);\n    }\n    console.info(`calling create new order got externalOrderId: ${res.data.externalOrderId} amount ${res.data.amount} trackingId: ${res.data.trackingId}`)\n    yield put(userAction.setCreateOrderSuccess(res.data));\n  } catch (err: any) {\n    console.error(`error while creating order ${err}`)\n    toast.error(`error ${err.message}`);\n  }\n}\n\nfunction* watchLinkOrderTransaction(action: { type: EUserActionTypes; payload: { orderTrackingId: string, transactionHash: string, nativeAmount: number }}) {\n  try {\n    yield call(() => UserService.linkOrderTransaction(action.payload.orderTrackingId, action.payload.transactionHash, action.payload.nativeAmount));\n    //yield put(userAction.setLinkTransactionSuccess(res));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchGetTickers() {\n  try {\n    const res: AxiosResponse<ITicker[]> = yield call(() => UserService.getTickersApi());\n    yield put(userAction.getTickersSuccess(res.data));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchCreateTransactions(action: { type: EUserActionTypes; payload: {account: string; amount: number, orderTrackingId: string }}) {\n  try {\n    const res: ITransaction = yield call(() => generateTransaction(action.payload.account, action.payload.amount, action.payload.orderTrackingId));\n    const transactionOrder: ITransactionOrder = {\n      transaction: res,\n      orderTrackingId: action.payload.orderTrackingId\n    }\n    yield put(userAction.setCreateTransactionSuccess(transactionOrder));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchUnsetTransaction(action: { type: EUserActionTypes}) {\n  try {\n    yield put(userAction.setCreateTransactionSuccess(null));\n  } catch (err: any) {\n    toast.error(err.message);\n  }\n}\n\nfunction* watchCreateMerchant(action: { type: EUserActionTypes; payload: {merchant: IMerchant, history: H.History}}) {\n  try {\n    const res: AxiosResponse = yield call(() => UserService.createNewMerchant(action.payload.merchant)\n        // .catch(\n        // onrejectionhandled => {\n        //   console.warn(`called failed ${onrejectionhandled.response.data} ${onrejectionhandled.data}`);\n        //   if (onrejectionhandled && onrejectionhandled.includes(\"There's already a merchant for the same member\")) {\n        //     action.payload.history.replace(\"/merchant/profile\");\n        //   }\n        // }\n    // )\n  );\n    console.info(`createMerchant response ${res} ${res.status} ${res.data}`)\n    if (res.status !== 200) {\n      console.error(`error result in create new merchant`);\n    }\n    yield put(userAction.setCreateMerchantSuccess(res.data));\n    action.payload.history.replace(\"/merchant/profile\");\n  } catch (err: any) {\n    console.error(`error while creating merchant ${err}`)\n    toast.error(err.data.message ? `${err.data.message}` : `Error ${err.status}`);\n  }\n}\n\n\n","import { all, fork } from 'redux-saga/effects';\n\nimport userSaga from './user.saga';\n\nexport default function* root() {\n  yield all([fork(userSaga)]);\n}\n","import { applyMiddleware, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport rootState from './states';\nimport rootReducer from './reducer';\nimport rootSaga from './saga';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst configStore = (initialState = rootState) => {\n  const store = createStore(rootReducer, initialState, composeWithDevTools(applyMiddleware(sagaMiddleware)));\n\n  sagaMiddleware.run(rootSaga);\n\n  return store;\n};\n\nexport const store = configStore();\n","import { BigNumber, utils } from \"ethers\";\nimport { createContext, ReactNode, useContext, useState } from \"react\";\nimport * as encoding from \"@walletconnect/encoding\";\nimport { Transaction as EthTransaction } from \"@ethereumjs/tx\";\nimport {getLocalStorageTestnetFlag} from \"../helpers\";\nimport { useWalletConnectClient } from \"./walletConnect\";\nimport {\n  chainData,\n  DEFAULT_EIP155_METHODS,\n} from '../consts';\nimport {ITransaction} from \"../helpers/tx\";\n\n/**\n * Types\n */\nexport interface IFormattedRpcResponse {\n  method?: string;\n  address?: string;\n  valid: boolean;\n  result: string;\n  toAddress?: string;\n  value?: string;\n}\n\n//type TRpcRequestCallback = (chainId: string, address: string) => Promise<IFormattedRpcResponse | null>;\ntype TRpcRequestCallback = (chainId: string, address: string, trx: ITransaction) => Promise<IFormattedRpcResponse | null>;\n\ninterface IContext {\n  ping: () => Promise<void>;\n  ethereumRpc: {\n    testSendTransaction: TRpcRequestCallback;\n    testSignTransaction: TRpcRequestCallback;\n    testEthSign: TRpcRequestCallback;\n    testSignPersonalMessage: TRpcRequestCallback;\n    // testEthBalance: TRpcRequestCallback;\n  };\n  // cosmosRpc: {\n  //   testSignDirect: TRpcRequestCallback;\n  //   testSignAmino: TRpcRequestCallback;\n  // };\n  // solanaRpc: {\n  //   testSignMessage: TRpcRequestCallback;\n  //   testSignTransaction: TRpcRequestCallback;\n  // };\n  rpcResult?: IFormattedRpcResponse | null;\n  isRpcRequestPending: boolean;\n  isTestnet: boolean;\n  setIsTestnet: (isTestnet: boolean) => void;\n}\n\n/**\n * Context\n */\nexport const JsonRpcContext = createContext<IContext>({} as IContext);\n\n/**\n * Provider\n */\nexport function JsonRpcContextProvider({ children }: { children: ReactNode | ReactNode[] }) {\n  const [pending, setPending] = useState(false);\n  const [result, setResult] = useState<IFormattedRpcResponse | null>();\n  const [isTestnet, setIsTestnet] = useState(getLocalStorageTestnetFlag());\n\n  const { client, session, accounts, balances, solanaPublicKeys } = useWalletConnectClient();\n\n  // const { chainData } = useChainData();\n\n  const _createJsonRpcRequestHandler =\n    (rpcRequest: (chainId: string, address: string, trx: ITransaction) => Promise<IFormattedRpcResponse>) =>\n    async (chainId: string, address: string, trx: ITransaction) => {\n      if (typeof client === \"undefined\") {\n        throw new Error(\"WalletConnect is not initialized\");\n      }\n      if (typeof session === \"undefined\") {\n        throw new Error(\"Session is not connected\");\n      }\n      try {\n        setPending(true);\n        const result = await rpcRequest(chainId, address, trx);\n        setResult(result);\n        return result;\n      } catch (err: any) {\n        console.error(\"RPC request failed: \", err);\n        let errorResult = {\n          address,\n          valid: false,\n          result: err?.message ?? err,\n        };\n        setResult(errorResult);\n        return errorResult\n        //return result;\n      } finally {\n        setPending(false);\n      }\n      return null\n    };\n\n  const _verifyEip155MessageSignature = (message: string, signature: string, address: string) =>\n    utils.verifyMessage(message, signature).toLowerCase() === address.toLowerCase();\n\n  const ping = async () => {\n    if (typeof client === \"undefined\") {\n      throw new Error(\"WalletConnect is not initialized\");\n    }\n    if (typeof session === \"undefined\") {\n      throw new Error(\"Session is not connected\");\n    }\n\n    try {\n      setPending(true);\n\n      let valid = false;\n\n      try {\n        await client.ping({ topic: session.topic });\n        valid = true;\n      } catch (e) {\n        valid = false;\n      }\n\n      // display result\n      setResult({\n        method: \"ping\",\n        valid,\n        result: valid ? \"Ping succeeded\" : \"Ping failed\",\n      });\n    } catch (e) {\n      console.error(e);\n      setResult(null);\n    } finally {\n      setPending(false);\n    }\n  };\n\n  // -------- ETHEREUM/EIP155 RPC METHODS --------\n\n  const ethereumRpc = {\n    testSendTransaction: _createJsonRpcRequestHandler(async (chainId: string, address: string, trx: ITransaction) => {\n      console.info(`testSendTransaction for trx chainId: ${chainId} address: ${address}`)\n      const caipAccountAddress = `${chainId}:${address}`;\n      const account = accounts.find((account: string) => account === caipAccountAddress);\n      if (account === undefined) throw new Error(`Account for ${caipAccountAddress} not found`);\n      const balance = BigNumber.from(balances[account][0].balance || \"0\");\n\n      let gasPriceBigN = BigNumber.from(trx.gasPrice);\n      const gasLimitBigN = BigNumber.from(trx.gasLimit);\n      let totalGasFees = gasPriceBigN.mul(gasLimitBigN);\n      if (balance.lt(totalGasFees)) {\n        console.warn(`Insufficient funds for intrinsic transaction cost`);\n        return {\n          method: DEFAULT_EIP155_METHODS.ETH_SEND_TRANSACTION,\n          address,\n          valid: false,\n          result: \"Insufficient funds for intrinsic transaction cost\",\n          toAddress: trx.to,\n          value: trx.value,\n        };\n      }\n      const transactionCost = BigNumber.from(trx.value);\n      let transactionCostBigN = transactionCost.add(totalGasFees);\n      console.info(`current balance is ${balance}. gasPrice: ${gasPriceBigN} gasLimit: ${gasLimitBigN}. transaction cost: ${transactionCostBigN}`)\n      if (balance.lt(transactionCostBigN)) {\n        console.warn(`Insufficient funds for transaction`);\n        return {\n          method: DEFAULT_EIP155_METHODS.ETH_SEND_TRANSACTION,\n          address,\n          valid: false,\n          result: \"Insufficient funds for transaction\",\n          toAddress: trx.to,\n          value: trx.value,\n        };\n      }\n      console.info(`committing trx to wc`)\n      const result = await client!.request<string>({\n        topic: session!.topic,\n        chainId,\n        request: {\n          method: DEFAULT_EIP155_METHODS.ETH_SEND_TRANSACTION,\n          params: [trx],\n        },\n      });\n      console.info(`ETH_SEND_TRANSACTION result: ${result}`)\n      return {\n        method: DEFAULT_EIP155_METHODS.ETH_SEND_TRANSACTION,\n        address,\n        valid: true,\n        result,\n        toAddress: trx.to,\n        value: trx.value,\n      };\n    }),\n    testSignTransaction: _createJsonRpcRequestHandler(async (chainId: string, address: string, tx: ITransaction): Promise<IFormattedRpcResponse> => {\n      const caipAccountAddress = `${chainId}:${address}`;\n      const account = accounts.find((account: string) => account === caipAccountAddress);\n      if (account === undefined) throw new Error(`Account for ${caipAccountAddress} not found`);\n      // const tx = await formatTestTransaction(account);\n      console.info(`testSignTransaction request for trx ${tx.from}`)\n\n      const signedTx: string = await client!.request({\n        topic: session!.topic,\n        chainId,\n        request: {\n          method: DEFAULT_EIP155_METHODS.ETH_SIGN_TRANSACTION,\n          params: [tx],\n        },\n      });\n      const valid = EthTransaction.fromSerializedTx(signedTx as any).verifySignature();\n      console.info(`send signTransaction result: ${signedTx} valid: ${valid}`)\n\n      let rpcResult = {\n        method: DEFAULT_EIP155_METHODS.ETH_SIGN_TRANSACTION,\n        address: address,\n        valid: valid,\n        result: signedTx,\n        toAddress: tx.to,\n        value: tx.value,\n      };\n      setResult(result)\n      return rpcResult;\n    }),\n    testSignPersonalMessage: _createJsonRpcRequestHandler(\n      async (chainId: string, address: string) => {\n\n        // test message\n        const message = `My email is john@doe.com - ${Date.now()}`;\n\n        // encode message (hex)\n        const hexMsg = encoding.utf8ToHex(message, true);\n\n        // personal_sign params\n        const params = [hexMsg, address];\n\n        // send message\n        const signature = await client!.request<string>({\n          topic: session!.topic,\n          chainId,\n          request: {\n            method: DEFAULT_EIP155_METHODS.PERSONAL_SIGN,\n            params,\n          },\n        });\n\n        //  split chainId\n        const [namespace, reference] = chainId.split(\":\");\n\n        const targetChainData = chainData[namespace][reference];\n\n        if (typeof targetChainData === \"undefined\") {\n          throw new Error(`Missing chain data for chainId: ${chainId}`);\n        }\n\n        const valid = _verifyEip155MessageSignature(message, signature, address);\n\n        // format displayed result\n        return {\n          method: DEFAULT_EIP155_METHODS.PERSONAL_SIGN,\n          address,\n          valid,\n          result: signature,\n        };\n      },\n    ),\n    testEthSign: _createJsonRpcRequestHandler(async (chainId: string, address: string) => {\n      // test message\n      const message = `My email is john@doe.com - ${Date.now()}`;\n      // encode message (hex)\n      const hexMsg = encoding.utf8ToHex(message, true);\n      // eth_sign params\n      const params = [address, hexMsg];\n\n      // send message\n      const signature: string = await client!.request({\n        topic: session!.topic,\n        chainId,\n        request: {\n          method: DEFAULT_EIP155_METHODS.ETH_SIGN,\n          params,\n        },\n      });\n\n      //  split chainId\n      const [namespace, reference] = chainId.split(\":\");\n\n      // const targetChainData = chainData[namespace][reference];\n      //\n      // if (typeof targetChainData === \"undefined\") {\n      //   throw new Error(`Missing chain data for chainId: ${chainId}`);\n      // }\n\n      const valid = _verifyEip155MessageSignature(message, signature, address);\n\n      // format displayed result\n      return {\n        method: DEFAULT_EIP155_METHODS.ETH_SIGN + \" (standard)\",\n        address,\n        valid,\n        result: signature,\n      };\n    }),\n  };\n\n\n  // -------- COSMOS RPC METHODS --------\n\n  // const cosmosRpc = {\n  //   testSignDirect: _createJsonRpcRequestHandler(async (chainId: string, address: string) => {\n  //     // test direct sign doc inputs\n  //     const inputs = {\n  //       fee: [{ amount: \"2000\", denom: \"ucosm\" }],\n  //       pubkey: \"AgSEjOuOr991QlHCORRmdE5ahVKeyBrmtgoYepCpQGOW\",\n  //       gasLimit: 200000,\n  //       accountNumber: 1,\n  //       sequence: 1,\n  //       bodyBytes:\n  //         \"0a90010a1c2f636f736d6f732e62616e6b2e763162657461312e4d736753656e6412700a2d636f736d6f7331706b707472653766646b6c366766727a6c65736a6a766878686c63337234676d6d6b38727336122d636f736d6f7331717970717870713971637273737a673270767871367273307a716733797963356c7a763778751a100a0575636f736d120731323334353637\",\n  //       authInfoBytes:\n  //         \"0a500a460a1f2f636f736d6f732e63727970746f2e736563703235366b312e5075624b657912230a21034f04181eeba35391b858633a765c4a0c189697b40d216354d50890d350c7029012040a020801180112130a0d0a0575636f736d12043230303010c09a0c\",\n  //     };\n  //\n  //     // split chainId\n  //     const [namespace, reference] = chainId.split(\":\");\n  //\n  //     // format sign doc\n  //     const signDoc = formatDirectSignDoc(\n  //       inputs.fee,\n  //       inputs.pubkey,\n  //       inputs.gasLimit,\n  //       inputs.accountNumber,\n  //       inputs.sequence,\n  //       inputs.bodyBytes,\n  //       reference,\n  //     );\n  //\n  //     // cosmos_signDirect params\n  //     const params = {\n  //       signerAddress: address,\n  //       signDoc: stringifySignDocValues(signDoc),\n  //     };\n  //\n  //     // send message\n  //     const result = await client!.request({\n  //       topic: session!.topic,\n  //       chainId,\n  //       request: {\n  //         method: DEFAULT_COSMOS_METHODS.COSMOS_SIGN_DIRECT,\n  //         params,\n  //       },\n  //     });\n  //\n  //     const targetChainData = chainData[namespace][reference];\n  //\n  //     if (typeof targetChainData === \"undefined\") {\n  //       throw new Error(`Missing chain data for chainId: ${chainId}`);\n  //     }\n  //\n  //     const valid = await verifyDirectSignature(address, result.signature, signDoc);\n  //\n  //     // format displayed result\n  //     return {\n  //       method: DEFAULT_COSMOS_METHODS.COSMOS_SIGN_DIRECT,\n  //       address,\n  //       valid,\n  //       result: result.signature,\n  //     };\n  //   }),\n  //   testSignAmino: _createJsonRpcRequestHandler(async (chainId: string, address: string) => {\n  //     // split chainId\n  //     const [namespace, reference] = chainId.split(\":\");\n  //\n  //     // test amino sign doc\n  //     const signDoc = {\n  //       msgs: [],\n  //       fee: { amount: [], gas: \"23\" },\n  //       chain_id: \"foochain\",\n  //       memo: \"hello, world\",\n  //       account_number: \"7\",\n  //       sequence: \"54\",\n  //     };\n  //\n  //     // cosmos_signAmino params\n  //     const params = { signerAddress: address, signDoc };\n  //\n  //     // send message\n  //     const result = await client!.request({\n  //       topic: session!.topic,\n  //       chainId,\n  //       request: {\n  //         method: DEFAULT_COSMOS_METHODS.COSMOS_SIGN_AMINO,\n  //         params,\n  //       },\n  //     });\n  //\n  //     const targetChainData = chainData[namespace][reference];\n  //\n  //     if (typeof targetChainData === \"undefined\") {\n  //       throw new Error(`Missing chain data for chainId: ${chainId}`);\n  //     }\n  //\n  //     const valid = await verifyAminoSignature(address, result.signature, signDoc);\n  //\n  //     // format displayed result\n  //     return {\n  //       method: DEFAULT_COSMOS_METHODS.COSMOS_SIGN_AMINO,\n  //       address,\n  //       valid,\n  //       result: result.signature,\n  //     };\n  //   }),\n  // };\n\n  // -------- SOLANA RPC METHODS --------\n\n  // const solanaRpc = {\n  //   testSignTransaction: _createJsonRpcRequestHandler(\n  //     async (chainId: string, address: string): Promise<IFormattedRpcResponse> => {\n  //       if (!solanaPublicKeys) {\n  //         throw new Error(\"Could not find Solana PublicKeys.\");\n  //       }\n  //\n  //       const senderPublicKey = solanaPublicKeys[address];\n  //\n  //       const connection = new Connection(clusterApiUrl(isTestnet ? \"testnet\" : \"mainnet-beta\"));\n  //\n  //       // Using deprecated `getRecentBlockhash` over `getLatestBlockhash` here, since `mainnet-beta`\n  //       // cluster only seems to support `connection.getRecentBlockhash` currently.\n  //       const { blockhash } = await connection.getRecentBlockhash();\n  //\n  //       const transaction = new SolanaTransaction({\n  //         feePayer: senderPublicKey,\n  //         recentBlockhash: blockhash,\n  //       }).add(\n  //         SystemProgram.transfer({\n  //           fromPubkey: senderPublicKey,\n  //           toPubkey: Keypair.generate().publicKey,\n  //           lamports: 1,\n  //         }),\n  //       );\n  //\n  //       try {\n  //         const { signature } = await client!.request({\n  //           topic: session!.topic,\n  //           request: {\n  //             method: DEFAULT_SOLANA_METHODS.SOL_SIGN_TRANSACTION,\n  //             params: {\n  //               feePayer: transaction.feePayer!.toBase58(),\n  //               recentBlockhash: transaction.recentBlockhash,\n  //               instructions: transaction.instructions.map(i => ({\n  //                 programId: i.programId.toBase58(),\n  //                 data: bs58.encode(i.data),\n  //                 keys: i.keys.map(k => ({\n  //                   isSigner: k.isSigner,\n  //                   isWritable: k.isWritable,\n  //                   pubkey: k.pubkey.toBase58(),\n  //                 })),\n  //               })),\n  //             },\n  //           },\n  //         });\n  //\n  //         // We only need `Buffer.from` here to satisfy the `Buffer` param type for `addSignature`.\n  //         // The resulting `UInt8Array` is equivalent to just `bs58.decode(...)`.\n  //         transaction.addSignature(senderPublicKey, Buffer.from(bs58.decode(signature)));\n  //\n  //         const valid = transaction.verifySignatures();\n  //\n  //         return {\n  //           method: DEFAULT_SOLANA_METHODS.SOL_SIGN_TRANSACTION,\n  //           address,\n  //           valid,\n  //           result: signature,\n  //         };\n  //       } catch (error: any) {\n  //         throw new Error(error);\n  //       }\n  //     },\n  //   ),\n  //   testSignMessage: _createJsonRpcRequestHandler(\n  //     async (chainId: string, address: string): Promise<IFormattedRpcResponse> => {\n  //       if (!solanaPublicKeys) {\n  //         throw new Error(\"Could not find Solana PublicKeys.\");\n  //       }\n  //\n  //       const senderPublicKey = solanaPublicKeys[address];\n  //\n  //       // Encode message to `UInt8Array` first via `TextEncoder` so we can pass it to `bs58.encode`.\n  //       const message = bs58.encode(\n  //         new TextEncoder().encode(`This is an example message to be signed - ${Date.now()}`),\n  //       );\n  //\n  //       try {\n  //         const { signature } = await client!.request({\n  //           topic: session!.topic,\n  //           request: {\n  //             method: DEFAULT_SOLANA_METHODS.SOL_SIGN_MESSAGE,\n  //             params: {\n  //               pubkey: senderPublicKey.toBase58(),\n  //               message,\n  //             },\n  //           },\n  //         });\n  //\n  //         const valid = verifyMessageSignature(senderPublicKey.toBase58(), signature, message);\n  //\n  //         return {\n  //           method: DEFAULT_SOLANA_METHODS.SOL_SIGN_MESSAGE,\n  //           address,\n  //           valid,\n  //           result: signature,\n  //         };\n  //       } catch (error: any) {\n  //         throw new Error(error);\n  //       }\n  //     },\n  //   ),\n  // };\n\n  return (\n    <JsonRpcContext.Provider\n      value={{\n        ping,\n        ethereumRpc,\n        rpcResult: result,\n        isRpcRequestPending: pending,\n        isTestnet,\n        setIsTestnet,\n      }}\n    >\n      {children}\n    </JsonRpcContext.Provider>\n  );\n}\n\nexport function useJsonRpc() {\n  const context = useContext(JsonRpcContext);\n  if (context === undefined) {\n    throw new Error(\"useJsonRpc must be used within a JsonRpcContextProvider\");\n  }\n  return context;\n}\n","export default __webpack_public_path__ + \"static/media/logo.916504ce.png\";","export default __webpack_public_path__ + \"static/media/promo_image_1.ffb5ea76.svg\";","export default __webpack_public_path__ + \"static/media/promo_image_2.2844eac7.svg\";","export default __webpack_public_path__ + \"static/media/promo_image_3.ac1a9ffa.svg\";","import i18next from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport translationEnglish from \"../assets/locales/en/special.json\";\nimport translationSpanish from \"../assets/locales/es/special.json\";\n\nconst resources = {\n    en: {\n        special: translationEnglish,\n    },\n    es: {\n        special: translationSpanish,\n    },\n}\n\ni18next\n    .use(initReactI18next)\n    .use(LanguageDetector)\n    .init({\n        resources,\n        debug: true,\n        fallbackLng: \"en\",\n        ns: ['special'],\n    });\n\n\nexport default i18next;\n","import React, {lazy, Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './assets/styles/index.scss';\nimport reportWebVitals from './reportWebVitals';\nimport { store } from './store';\nimport {JsonRpcContextProvider} from \"./contexts/JsonRpcContext\";\nimport {WalletConnectProvider} from \"./contexts/walletConnect\";\nimport {ErrorPage} from \"./pages/error\";\nimport {Landing} from \"./pages/landing\";\nimport \"./utils/i18utils\";\n\n\nconst Main = React.lazy(() =>\n    import(\"./pages\").then((module) => ({\n        default: module.Main,\n    }))\n);\n\n//FIXME needed ?\n//i18next.use();\n\nReactDOM.render(\n  <Provider store={store}>\n    <WalletConnectProvider>\n      <JsonRpcContextProvider>\n          <Suspense fallback={Landing}>\n          {/*<I18nextProvider i18n={i18next}>*/}\n          <Router>\n              <Switch>\n                  {/*<Route path={'/pay'} component={Pay}></Route>*/}\n                  <Route path={'/error'} component={ErrorPage}></Route>\n                  {/*<Route path={'/merchant/register'} component={RegisterMerchant}></Route>*/}\n                  <Route path={'/'} component={Main} ></Route>\n              </Switch>\n            <ToastContainer\n              toastClassName=\"w-full m-w-45 flex bg-black bg-opacity-90 border-2 border-secondary rounded-16xl shadow-md p-4 text-sm\"\n              bodyClassName={() => 'text-sm font-white font-med block p-1'}\n              autoClose={false}\n              icon={true}\n              position=\"bottom-center\"\n              hideProgressBar={true}\n              closeOnClick={false}\n            />\n          </Router>\n          {/*</I18nextProvider>*/}\n          </Suspense>\n        </JsonRpcContextProvider>\n    </WalletConnectProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n","import logoIcon from '../assets/images/logo.png';\nimport promo1 from '../assets/images/promo_image_1.svg';\nimport promo2 from '../assets/images/promo_image_2.svg';\nimport promo3 from '../assets/images/promo_image_3.svg';\nimport React from \"react\";\n\nexport const ErrorPage = () => {\n\n\n\n    return (\n        <div className=\"h-screen w-screen flex twoColumnContainer\">\n            {/*Left Column*/}\n            <div className=\"h-full w-full flex items-center justify-around flex-col bg-white shadow-md py-40\">\n                <div className=\"flex items-center justify-center \">\n                    <img className=\"w-12 h-12\" src={logoIcon} alt=\"\"/>\n                    <div className=\"w-full flex flex-col p-4\">\n                        <h1 className=\"text-xl font-righteous\">Storefront Pay</h1>\n                    </div>\n                </div>\n\n\n                <div className=\"w-3/4 flex justify-around py-4\">\n                <div className=\"flex flex-col p-4\">\n                    <p className=\"text-sm\">error</p>\n                    <p className=\"font-bold text-xl\">Something went wrong</p>\n                </div>\n                </div>\n\n\n            </div>\n\n            {/*Right Column*/}\n            <div className=\"w-full flex items-center justify-center flex-col py-10\">\n                <div id=\"qrcode2\" className=\"flex items-center justify-center rounded-10xl overflow-hidden m-10 qrcode\">\n                    <img className=\"w-16 h-16\" src={logoIcon} alt=\"\"/>\n                </div>\n                <h1 className=\"text-white text-xl text-center font-bold mx-40 \">Accept Crypto Payments and Drive Incremental Sales Now!</h1>\n\n                <img className=\"w-16 h-16 mt-4\" src={promo1} alt=\"\"/>\n                <p className=\"text-white font-bold mt-4\">Reach Millions of Users</p>\n                <p className=\"text-white text-center text-sm mt-4 mx-40\">Access to millions of users using wallet apps, and capitalise on the world's largest adoption rate. </p>\n\n                <img className=\"w-16 h-16 mt-10\" src={promo2} alt=\"\"/>\n                <p className=\"text-white font-bold mt-4\">Lowest Cost</p>\n                <p className=\"text-white text-center text-sm mt-4 mx-40\">Pay zero transactions fees and save up to 85% on settlement fees. </p>\n\n                <img className=\"w-16 h-16 mt-10\" src={promo3} alt=\"\"/>\n                <p className=\"text-white font-bold mt-4\">Easy Integration</p>\n                <p className=\"text-white text-center text-sm mt-4 mx-40\">Integrate with a few clicks using our SDK or plugins. No coding experience needed. </p>\n            </div>\n        </div>\n    );\n};\n","import Web3 from 'web3';\nimport * as ethers from 'ethers';\nimport {ethereumRpcUrl} from \"../config/appconfig\";\nconst ENS = require('@ensdomains/ensjs').default;\nconst getEnsAddress = require('@ensdomains/ensjs').getEnsAddress;\n\nconst provider = new ethers.providers.JsonRpcProvider(ethereumRpcUrl);\nexport const web3 = new Web3(ethereumRpcUrl);\nexport const ens = new ENS({ provider, ensAddress: getEnsAddress('1') });\n"],"sourceRoot":""}